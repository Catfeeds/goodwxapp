<!-- 信息列表 -->
<template name="doc-list">
    <form>
        <view class='doc-list'>

            <view class='list-item' wx:for="{{data}}" wx:key="{{item.id}}" catchtap="onNavigateTap" data-url="../detail/detail?id={{item.id}}" style="{{styles[item.cid].list_item}}">
                <view class='list-item-header'>
                    <view class='header-left'>
                        <image class='avatar' src="{{item.headimgurl}}" catchtap="onNavigateTap" data-url="../frd_info/frd_info?uid={{item.uid}}&vest_id={{item.vest_id}}" mode="aspectFill"></image>
                    </view>
                    <view class='header-inner'>
                        <view>
                            <text class='nickname mr5 lineText'>{{item.nickname}}</text>
                            <text class='red mr5' wx:if='{{item.is_admin}}'>管理员</text>
                            <view class="wallet mr5" wx:if='{{item.wallet_id>0}}'>
                                <text class="hongbao-ico iconfont icon-hongbao"></text> 红包福利
                            </view>
                            <text class="red mr5" wx:if="{{item.status==0}}">正在审核</text>
                        </view>
                        <view class='linght'>{{item.create_time}}</view>
                    </view>
                    <view class='header-right'>
                        <view class="top" wx:if="{{item.is_top>0}}"></view>
                        <button plain='true' class='contact' data-mobile="{{item.mobile}}" catchtap="onCallTap" wx:if="{{item.mobile}}">联系Ta</button>
                    </view>
                </view>

                <template is='doc-list-item-body' data='{{item}}' />

                <view class='list-item-footer'>
                    <!-- <view class='footer-item'>
                     <view class="classify red" catchtap="onNavigateTap" data-url="../lists/lists?cid={{item.cid}}&title={{item.category_title}}&childCid={{item.cid2}}" data-invalid="{{cate_invalid===true}}">
                        #{{item.category_title}}
                        <block wx:if='{{item.cid2>0}}'>●{{item.category2_title}}</block>#
                    </view> 
                </view> -->
                    <view class='footer-item footer-item-view grey flex'>
                        <view class="icon-btn sub" wx:if="{{config.show_read_count!==0}}">
                            <text class="iconfont icon-attention"></text> {{item.click}}
                        </view>
                        <view class='sub' wx:if="{{config.show_comment!==0}}">
                            <text class="iconfont icon-comment"></text> {{item.comment}}
                        </view>
                        <view class="sub {{item.is_good?'green':''}}" data-index="{{index}}" data-id="{{item.id}}" wx:if="{{config.show_good!==0}}" catchtap='onGoodTap'>
                            <text class="iconfont icon-appreciate {{item.is_good?'icon-appreciatefill':'icon-appreciate'}}"></text> {{item.good}}
                        </view>
                        <view class="sub icon-btn" wx:if='{{config.show_share!==0}}'>
                            <button class="share-btn" open-type="share" data-index='{{index}}' catchtap='onEmptyTap'></button>
                            <text class="iconfont icon-share"></text>分享
                        </view>
                        <!-- <button open-type="share" data-index='{{index}}' catchtap='onEmptyTap' wx:if='{{config.show_share!==0}}'></button> -->
                    </view>
                </view>

                <template is='simple-comment-list' data='{{data:item.comment_list}}' wx:if="{{item.comment_list.length && config.show_comment!==0}}" />
            </view>

            <template is='doc-list-tips' data='{{hasMore,isLoading}}' />

        </view>
    </form>
</template>

<!-- 我的信息列表 -->
<template name="my-doc-list">
    <view class='doc-list'>

        <view class='list-item' wx:for="{{data}}" wx:key="{{item.id}}" catchtap="onNavigateTap" data-url="../detail/detail?id={{item.id}}" style="{{styles[item.cid].list_item}}">

            <view class='list-item-header'>
                <view class='header-left'>
                    <image class='avatar' src="{{item.headimgurl}}" catchtap="onNavigateTap" data-url="../frd_info/frd_info?uid={{item.uid}}" mode="aspectFill"></image>
                </view>
                <view class='header-inner'>
                    <view>
                        <text class='nickname mr5'>{{item.nickname}}</text>
                        <text class='red mr5' wx:if='{{item.is_admin}}'>管理员</text>
                        <view class="wallet mr5" wx:if='{{item.wallet_id>0}}'>
                            <text class="hongbao-ico iconfont icon-hongbao"></text> 红包福利
                        </view>
                    </view>
                    <view class='linght'>{{item.create_time}}</view>
                </view>
                <view class='header-right'>
                    <view class="top" wx:if="{{item.is_top>0}}"></view>
                    <view class='status-text'>
                        <block wx:if="{{item.is_pay>0}}">
                            <text class="red" wx:if="{{item.is_pay==1}}">未支付</text>
                            <text class="grey" wx:elif="{{item.is_pay==2}}">已支付</text>
                        </block>
                        <block wx:else>
                            <text class="red" wx:if="{{item.status==0}}">正在审核</text>
                        </block>
                    </view>
                </view>
            </view>

            <template is='doc-list-item-body' data='{{item}}' />

            <view class='list-item-footer'>
                <!-- <view class='footer-item'>
                     <view class="classify red" catchtap="onNavigateTap" data-url="../lists/lists?cid={{item.cid}}&title={{item.category_title}}&childCid={{item.cid2}}">
                        #{{item.category_title}}
                        <block wx:if='{{item.cid2>0}}'>●{{item.category2_title}}</block>#
                    </view> 
                </view> -->
                <view class='footer-item footer-item-action'>
                    <view class="btn btn-danger" catchtap='onDelTap' data-id='{{item.id}}' data-index='{{index}}'>删除</view>
                    <view class="btn btn-primary" wx:if="{{item.is_pay==1}}" data-doc-id="{{item.id}}" catchtap="onPayTap">支付</view>
                </view>
            </view>

            <template is='simple-comment-list' data='{{data:item.comment_list}}' wx:if="{{item.comment_list.length && config.show_comment!==0}}" />

        </view>

        <template is='doc-list-tips' data='{{hasMore,isLoading}}' />

    </view>
</template>

<!-- 信息列表内容 -->
<template name='doc-list-item-body'>
    <view class='list-item-body'>
        <view class='body-content'>
            <text class="classify red" catchtap="onNavigateTap" data-url="../lists/lists?cid={{item.cid}}&title={{item.category_title}}&childCid={{item.cid2}}" data-invalid="{{cate_invalid===true}}">#{{item.category_title}}<block wx:if='{{item.cid2>0}}'>●{{item.category2_title}}</block>#  </text>
            <text> {{item.content}}</text>
        </view>
        <view class='body-imgs' wx:if="{{item.imgs.length}}" catchtap="onPreviewTap" data-urls="{{item.imgs}}">
            <view class='body-imgs-item' wx:for="{{item.imgs}}" wx:for-item="img" wx:for-index='imgIndex' wx:if="{{imgIndex<3}}" wx:key="{{imgIndex}}">
                <image src="{{img}}?imageView2/1/w/136/h/136/q/75|imageslim" mode="aspectFill" data-index="{{imgIndex}}"></image>
                <view class="body-imgs-more" wx:if="{{imgIndex==2 && item.imgs.length>3}}" data-index="{{imgIndex}}">+{{item.imgs.length-3}}</view>
            </view>
        </view>
        <view class='body-tags' wx:if='{{item.tags.length}}'>
            <button plain="true" class="body-tags-item" wx:for='{{item.tags}}' wx:key='{{index}}'>{{item}}</button>
        </view>
        <view class='body-address' wx:if='{{item.address}}'>
            <text class="iconfont icon-locationfill"></text> {{item.address}}
        </view>
    </view>
</template>

<!-- 信息列表提示 -->
<template name='doc-list-tips'>
    <view class='nothing tc linght flex mt10 mb10' hidden="{{hasMore}}">
        <text class="sub line mr10"></text>
        <text>没有更多了</text>
        <text class="sub line ml10"></text>
    </view>

    <view class="linght tc mt10 mb10" hidden="{{!isLoading}}">
        <text class="loading-icon mr10 f18"></text>
        <text>正在加载中...</text>
    </view>
</template>


<!-- 简单的评论列表 -->
<template name='simple-comment-list'>
    <view class="simple-comment-list">
        <view class="comment-list-item" wx:for="{{data}}" wx:key="{{item.id}}">
            <text class="blue mr5">{{item.nickname}}:</text>
            <text>{{item.content}}</text>
            <view class='reply-list'>
                <view class="reply-list-item" wx:for="{{item.reply_list}}" wx:key="{{item.id}}">
                    <text class="blue">{{item.nickname}}</text> 回复
                    <text class="blue mr5">{{item.reply_nickname}}:</text>
                    <text>{{item.content}}</text>
                </view>
            </view>
        </view>
    </view>
</template>

<!-- 猜你喜欢 -->
<template name='recommend-list'>
    <view class="recommend mt10" wx:if='{{data.length}}'>
        <view class="recommend-title grey gridXb">为你推荐</view>
        <swiper class="doc-list">
            <swiper-item class="list-item" wx:for='{{data}}' wx:key='{{item.id}}' catchtap='onNavigateTap' data-type='redirect' data-url='./detail?id={{item.id}}'>
                <view class="list-item-header">
                    <view class='header-left'>
                        <image class="avatar" src="{{item.headimgurl}}" mode="aspectFill"></image>
                    </view>
                    <view class="header-inner">
                        <view>
                            <text class='nickname lineText'>{{item.nickname}}</text>
                            <view class="wallet mr5" wx:if='{{item.wallet_id>0}}'>
                                <text class="hongbao-ico iconfont icon-hongbao"></text> 红包福利
                            </view>
                        </view>
                        <view>
                            <text>{{item.create_time}}</text>
                        </view>
                    </view>
                    <view class='header-right'>
                        <!-- <view class="contact" data-mobile="{{item.mobile}}" catchtap="onCallTap" wx:if="{{item.mobile}}">联系Ta</view>  -->
                    </view>
                </view>

                <view class='list-item-body'>
                    <view class="body-content">{{item.content}}</view>
                    <view class='body-imgs' wx:if="{{item.imgs.length}}" catchtap="onPreviewTap" data-urls="{{item.imgs}}">
                        <view class='body-imgs-item' wx:for="{{item.imgs}}" wx:for-item="img" wx:for-index='imgIndex' wx:if="{{imgIndex<3}}" wx:key="{{imgIndex}}">
                            <image src="{{img}}?imageView2/1/w/136/h/136/q/75|imageslim" mode="aspectFill" data-index="{{imgIndex}}"></image>
                            <view class="body-imgs-more" wx:if="{{imgIndex==2 && item.imgs.length>3}}" data-index="{{imgIndex}}">+{{item.imgs.length-3}}</view>
                        </view>
                    </view>
                </view>

            </swiper-item>
        </swiper>
    </view>
</template>