<div class="page"  ng-controller="registController" style="padding-bottom:30px;" >
    <div class="page__hd">
        <div style="text-align: center">
            <img style=" height:150px;" src="./imgs/gxj.jpg">
        </div>

        <!--<h1 class="page__title">神尔国学机保障卡登记</h1>-->
        <p style="color: #f00;text-shadow: 1px 1px 0 #333,1px 1px 0 #444;" class="">亲，登记后保修时间由原来的1年延长至1年半</p>

    </div>
    <div class="page__bd">
        <form ng-submit="processOrder()" novalidate  name="cardForm" >
            <div class="weui-cells__title">请认真填写的以下信息,将作为以后保修的凭证</div>
            <div class="weui-cells__title">
                <div class="form-error"
                     ng-show="(cardForm.name.$invalid && cardForm.name.$dirty && !cardForm.name.$focused) || (cardForm.name.$invalid && submitted)">
                    <span ng-show="cardForm.name.$error.required">姓名不能为空</span>
                </div>
                <div class="form-error"
                     ng-show="(cardForm.telephone.$invalid && cardForm.telephone.$dirty && !cardForm.telephone.$focused) || (cardForm.telephone.$invalid && submitted)">
                    <span ng-show="cardForm.telephone.$error.required">手机号不能为空</span>
                    <span ng-show="cardForm.username.$error.pattern || cardForm.telephone.$error.pattern || cardForm.telephone.$error.minlength">请输入正确的手机号码</span>
                </div>
                <div class="form-error"
                     ng-show="(cardForm.order_date.$invalid && cardForm.order_date.$dirty && !cardForm.order_date.$focused) || (cardForm.order_date.$invalid && submitted)">
                    <span ng-show="cardForm.order_date.$error.required">购买日期不能为空</span>
                </div>
                
                <div class="form-error"
                     ng-show="(cardForm.machinecode.$invalid && cardForm.machinecode.$dirty && !cardForm.machinecode.$focused) || (cardForm.machinecode.$error.invalidCode && submitted) || (cardForm.machinecode.$error.existCode && submitted) || (cardForm.machinecode.$invalid && submitted) ">
                    <span  ng-show="cardForm.machinecode.$error.required">机器码不能为空</span>
                    <span  ng-show="cardForm.machinecode.$error.invalidCode && !cardForm.machinecode.$error.required">机器码验证失败</span>
                    <span ng-show="cardForm.machinecode.$error.existCode && !cardForm.machinecode.$error.required">机器码已登记</span>
                </div>
                <div class="form-error"
                     ng-show="(cardForm.area.$invalid && cardForm.area.$dirty && !cardForm.area.$focused) || (cardForm.area.$invalid && submitted)">
                    <span ng-show="cardForm.area.$error.required">省市区不能为空</span>
                </div>
            </div>
            <div class="weui-cells weui-cells_form">
                <div class="weui-cell">
                    <div class="weui-cell__hd">
                        <label class="weui-label">姓名</label>
                    </div>
                    <div class="weui-cell__bd">
                        <input class="weui-input" type="text" name="name" id="name" ng-model="card.user_name" required  placeholder="姓名" />

                    </div>
                </div>
                <div class="weui-cell ">
                    <div class="weui-cell__hd">
                        <label class="weui-label" >手机</label>
                    </div>
                    <div class="weui-cell__bd">
                        <input type="tel" class="weui-input" pattern="^1[34578]\d{9}$" name="telephone"
                               id="telephone" ng-minlength="11" ng-maxlength="11"
                               pattern="^1[34578]\d{9}$"  ng-model="card.telephone" required placeholder="手机号码"  />
                    </div>

                </div>
                <div class="weui-cell">
                    <div class="weui-cell__hd">
                        <label class="weui-label" >购买日期</label>
                    </div>
                    <div class="weui-cell__bd">
                        <input type="date" class="weui-input" name="order_date"
                               id="order_date"
                               ng-model="card.order_date"  required placeholder="购买日期"  />

                    </div>
                </div>
                <div class="weui-cell weui-cell_vcode">
                    <div class="weui-cell__hd">
                        <label class="weui-label" >机器码
                    </div></label>
                    <div class="weui-cell__bd">
                        <input class="weui-input" required
                               verify-machine-code="{{card.machine_code}}"
                               exist-machine-code="{{card.machine_code}}" 
                               name="machinecode" id="machinecode"  ng-model="card.machine_code"  placeholder="扫描机器上的二维码"   />
                    </div>
                    <div class="weui-cell__ft">
                        <button ng-click="scanQRCode()"  class="weui-vcode-btn">扫一扫</button>
                    </div>
                </div>
                <div class="weui-cell weui-cell_vcode">
                    <div class="weui-cell__hd">
                        <label class="weui-label" >省市区</label>
                    </div>
                    <div class="weui-cell__bd">
                        <input class="weui-input" name="area" id="area" city-picker="{{card.area}}"   ng-model="card.area" required placeholder="点击自动获取地址"   />

                    </div>
                    <div class="weui-cell__ft">
                        <button ng-click="getLocation()" class="weui-vcode-btn">自动获取</button>
                    </div>
                </div>
                <div class="weui-cell">
                    <div class="weui-cell__hd">
                        <label class="weui-label">详细地址</label>
                    </div>
                    <div class="weui-cell__bd">
                        <input class="weui-input" type="text" name="address" id="address" ng-model="card.address"  placeholder="详细地址" />
                    </div>
                </div>
            </div>
            <div class="weui-btn-area">
                <button type="submit" class="weui-btn weui-btn_primary">提交</button>
            </div>
        </form>
    </div>
</div>