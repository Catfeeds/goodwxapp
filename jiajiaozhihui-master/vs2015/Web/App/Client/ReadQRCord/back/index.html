<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Expires" content="0">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Cache-control" content="no-cache">
    <meta http-equiv="Cache" content="no-cache">
    <meta name="x5-orientation" content="portrait">
    <meta name="screen-orientation" content="portrait">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <link rel="stylesheet" href="//cdn.bootcss.com/weui/1.1.1/style/weui.min.css">
    <link rel="stylesheet" href="//cdn.bootcss.com/jquery-weui/1.0.1/css/jquery-weui.min.css">
    <link href="css/index.css" rel="stylesheet" type="text/css" />
    <link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

    <title>长按识别二维码进群</title>
    <style>
        html {font-size:14px;}
        .show {display:block;}
        .hide {display:none;}
    </style>
</head>
<body style="background:url(./img//header.jpg) no-repeat top center, url(./img/footer.jpg) no-repeat bottom; background-size:contain; background-color:#f8f8f0">
    <div class="page" style="opacity: 0;z-index:0;"></div>
    <div style="position:absolute;left:0;top:0px;width:100%;height:100%;z-index:99;">
        <div style="padding-top:40px;">
            <p style="text-align:center;">
                <img style="width:160px;" id="groupImg" src="" alt="">
            </p>
            
            <div class="common" style="text-align: center" id="desc"></div>
            <div class="advance" style="text-align:center;">
                <span style="color: rgb(255, 0, 0);font-size: large;">一年300节实用的家庭教育课程</span>
                <div>
                    <div><span style="font-size: small;">（涵盖实用教育方法、亲子沟通技巧</span></div>
                    <div><span style="font-size: small;">父母情绪管理、孩子学习提升）</span></div>
                </div>
            </div>
        </div>
        <div class="common hide">
            <div >
                <p style=" text-align:center;padding:15px 0;">
                    <img style="max-width:200px;" id="qrcode" src="" alt="">
                </p>
            </div>
            <div >
                <p style="text-align: center; color:#666">请长按识别上面的二维码</p>
                <h4 style="text-align: center; color:#333;margin-top:10px;"><span style="padding:5px 10px;border-radius:5px;border:1px solid #111;">仅限前100名免费加入</span></h4>
            </div>
        </div>
        <div class="advance hide" style="padding-top: 2rem;">
            <div id="sub">
                <div style="color:#f90; border-bottom:1px solid ; padding-bottom:15px; font-size:20px; text-align:center;">
                    <span id="catalogue"></span>
                </div>
                <div style="position:relative ">
                    <img style="width:100%;" src="img/advance.jpg" />

                    <div style="position:absolute;top: 1rem;left: 1rem;width:8.5rem;height: 8.5rem;">
                        <img style="width:100%;" id="advanceImg" src="" />
                    </div>
                </div>
            </div>
            <div  id="top">

            </div>
        </div>
    </div>
    <script src="https://cdn.bootcss.com/jquery/1.12.4/jquery.js"></script>
    <script>
        (function () {
            function getUrlParam(name) {
                var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象
                var r = window.location.search.substr(1).match(reg);  //匹配目标参数
                if (r != null) return unescape(r[2]); return null; //返回参数值
            }
            var groupId = getUrlParam("groupId");
            var contentId = getUrlParam("contentId");
            var catalogue = getUrlParam("catalogue") || 1;
            if (catalogue == 1) {
                $(".common").removeClass("hide");
                $(".advance").addClass("hide");
                $("#catalogue").text("初级班");
            } else {
                $(".common").addClass("hide");
                $(".advance").removeClass("hide");
                $("#catalogue").text("万妈妈家庭教育微课堂");
            }
            
            $.getJSON('http://192.168.100.76/app/project/group/controller/groupcontroller.ashx', { groupId: groupId, contentId: contentId,catalogue:catalogue }, function (res) {
                $("#desc").html(res.desc);
                $("#qrcode").attr("src", res.imgUrl);
                $("#groupImg").attr("src", res.groupImgUrl);
                $("#advanceImg").attr("src", res.imgUrl);
                document.title = res.groupName;
                console.log(res);
            })
        })()
    </script>
</body>
</html>
