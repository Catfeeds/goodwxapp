<view class="page">
  <view class="page__bd">
    <view class="recommend" wx:for="{{items}}" >
      <view class="weui-flex">
        <view>
          <view class="placeholder recommend-head">
            <image src="{{item.headImgUrl}}">
            </image>
          </view>
        </view>
        <view class="weui-flex__item">
          <view class="recommend-head__nickname">{{item.nickName}}</view>
          <view class="recommend-head__time">{{item.createDate}}</view>
        </view>
      </view>
      <view class="weui-flex">
        <view class="weui-flex__item">
          <view class="recommend-message">{{item.message}}</view>
        </view>
      </view>
      <view class="weui-flex">
        <view class="weui-flex__item">
          <view class=" recommend-target" >
            <view class="recommend-target__content">
              <image class="recommend-target__image" src="../image/tagar.png"></image>
              <view style="position:absolute; top:30rpx; width:100%;color:#fff; font-size:60rpx; " >
                <view style="text-align:center">{{item.target.finish}}</view>
              </view>
              <view style="position:absolute; top:155rpx;width:100%;" >
                <view style="text-align:center">坚持目标{{item.target.aim}}天</view>
                <view style="text-align:center;font-size:30rpx">早起</view>
              </view>
            </view>
          </view>
        </view>
        <view class="weui-flex__item">
          <image class="recommend-target__image" mode="aspectFit"  src="{{item.target.image}}" ></image>
        </view>
      </view>
      <view class="weui-flex">
        <view bindtap="updateLike" data-detailid="{{item.id}}" data-index="{{index}}" class="weui-flex__item recommend-action">
          <view style="{{item.like.isLike==true ? 'color:#f00':''  }}" class="recommend-action__like  fa fa-heart-o ">点赞</view>
        </view>
        <view bindtap="showComment" data-detailId="{{item.id}}" data-index="{{index}}" class="weui-flex__item recommend-action">
          <view class="recommend-action__comment fa fa-comment-o">评论</view>
        </view>
        <!--
        <view bindtap="showShare" class="weui-flex__item recommend-action" >
          <view class="recommend-action__more fa fa-share-square-o"  >更多</view>
        </view>
        -->
      </view>
      
      <view class="weui-flex recommend-like" wx:if="{{item.like.list.length>0}}">
        <view><view class="placeholder fa fa-heart-o" style="padding:0"></view></view>
        <view class="weui-flex__item">
          <view class="recommend-like__header">
            <image  wx:for="{{item.like.list}}" src="{{item}}"></image>
          </view>
        </view>
        <view wx:if="{{item.like.length>9}}"><view class="recommend-like__more"  >9</view></view>
      </view>
      <view wx:if="{{item.comment.length>0}}">
        <view wx:for-item="comment" wx:for-index="cindex" wx:for="{{item.comment}}" >
          <view class="weui-flex recommend-comment" bindtap="showReply" data-detailid="{{item.id}}" data-index="{{index}}" data-nickName="{{comment.name}}" data-commentid="{{comment.id}}">
            <view><view class="recommend-comment__header" >{{comment.name}}:</view></view>
            <view class="weui-flex__item" ><view class="recommend-comment__message" >{{comment.message}}</view> </view>
          </view>
        </view>
      </view>
    </view>
    <view style="position:fixed;bottom:0px;width:100%;" wx:if="{{showComment}}">
      <view style="background:#fff;padding:15rpx;">
          <textarea 
            auto-height="true"
            bindblur="hideComment" 
            fixed="true" 
            cursor-spacing="40"
            class="weui-textarea"
            auto-focus="true" 
            placeholder="请输入"
            bindconfirm="addComment"
            style="height:30rpx; border:1px solid #eee; border-radius:10rpx;padding:10px 0;"   />
        </view>
      </view>
      <view style="position:fixed;bottom:0rpx;width:100%;" wx:if="{{showReply}}">
        <view style="padding:15px;background:#fff;">
          <textarea 
            auto-height="true"  
            bindblur="hideReply" 
            fixed="true" 
            auto-focus="true" 
            cursor-spacing="40"
            class="weui-textarea"
            placeholder="回复{{reply.nickName}}"
            bindconfirm="addReply"
            style="height:30rpx; border:1px solid #eee; border-radius:10rpx;padding:10px 0;"   />
        </view>
      </view>
  </view>
</view>
