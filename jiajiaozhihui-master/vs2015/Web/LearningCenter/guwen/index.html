<!DOCTYPE html >
<html >
<head>
    <title>顾问帮助</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"　/>
    <meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" id="viewport" name="viewport" />
    <link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css"　/>
    <style type="text/css">
        body,html{ background-color:#F5F5F5;}
        .vertical{vertical-align:middle;display:table-cell;}
        a{color:#000;}
        a,a:link,a:visited,a:hover,a:active  { text-decoration:none;}
        .headerbg
        {
            position:absolute; 
            width:100%;
            left:0;
            bottom:0; 
            color:#fff;
            font-size:medium;
            background-color:#888;
            filter:alpha(opacity=80);
            -moz-opacity:0.8; 
            opacity:0.8;
            
            
        }
        .media{ border-top:1px solid #eee;margin:0;padding:10px 0; background:#fff;}  
        .wrap
        {
             margin:0 auto;    
        }
    </style>
</head>
<body>
    <div style="margin:15px;">
        <div class="container" id="container" style=" background:#fff;padding-top:15px; margin:0,15px;">
        
        </div>
    </div>
    

    <script src="//cdn.bootcss.com/jquery/1.12.4/jquery.js"></script>
    <script src="../js/moment.min.js" type="text/javascript"></script>
    <script>
        (function () {
            var type = getQueryString("type");
            $.ajax({
                url: "http://weixin.jiajiaozhihui.cn/Service/SpecialArticle.ashx?type=" + type + "&method=get",
                type: "GET",
                dataType: "JSON",
                success: function (res) {
                    console.log(res);
                    var html = "";

                    for (var i = 0; i < res.length; i++) {
                        console.log(res[i]);
                        var json = res[i];
                        html += '<div class="header" style="padding-bottom:15px;">'
                        html += '    <div style=" position:relative">'
                        html += '        <a href="' + json.header.articleUrl + '"><img style="width:100%;" src="' + "http://weixin.jiajiaozhihui.cn" + json.header.imgUrl + '" /></a>'
                        html += '        <div class="headerbg">';
                        html += '            <div class="vertical" style="padding:10px 5px"><a style="color:#fff;font-weight:bolder;" href="' + json.header.articleUrl + '">' + json.header.title + '</a></div>'
                        html += '        </div>'
                        html += '    </div>'
                        html += '</div>'
                        html += body(json.body);
                    }
                    $("#container").append(html);

                    function body(data) {
                        var html = "";
                        var t = data.length;
                        if (data.length > 0) {
                            html += '<div class="item">'
                            $.each(data, function (index, item) {
                                html += '   <div class="media">'
                                html += '       <div class="media-body" style="position:relative;"><a href="' + item.articleUrl + '">' + item.title + '<div style="position:absolute;left:0;bottom:0px; "><span style="color:#aaa;font-size:13px;">发布：' + fomatDate(item.createDate) + '</span></div></a></div>'
                                html += '       <div class="media-right media-middle">'
                                html += '           <a href="' + item.articleUrl + '"><img style=" min-height:60px; max-width:60px;" class="media-object" src="' + "http://weixin.jiajiaozhihui.cn" + item.imgUrl + '"></a>'
                                html += '       </div>'
                                html += '   </div>'
                            })
                            html += '</div >'
                        }
                        return html;
                    }
                }
            })
            function getQueryString(name) {
                var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
                var r = window.location.search.substr(1).match(reg);
                if (r != null) return unescape(r[2]); return null;
            };
            function fomatDate(t) {
                var d = new Date(t);
                return d.getFullYear() + "-" + (d.getMonth()+1) + "-" + d.getDate();
            }
        })()
    </script>
</body>
</html>
