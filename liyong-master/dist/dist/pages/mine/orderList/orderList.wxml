<wxs src="../../../filter.wxs" module="filter"></wxs><block wx:if="{{ !displayError }}"><view id="page"><view class="actionBar"><view class="actionBar__item {{ orderType === 'all' ? 'actionBar__item--active' : '' }}" bindtap="chooseTab" data-tab="all">全部</view><view class="actionBar__item ui-marginLeft5 {{ orderType === 'waitPay' ? 'actionBar__item--active' : '' }}" bindtap="chooseTab" data-tab="waitPay">待付款</view><view class="actionBar__item ui-marginLeft5 {{ orderType === 'waitDelivery' ? 'actionBar__item--active' : '' }}" bindtap="chooseTab" data-tab="waitDelivery">待发货</view><view class="actionBar__item ui-marginLeft5 {{ orderType === 'waitReceive' ? 'actionBar__item--active' : '' }}" bindtap="chooseTab" data-tab="waitReceive">待收货</view><view class="actionBar__item ui-marginLeft5 {{ orderType === 'waitEvaluate' ? 'actionBar__item--active' : '' }}" bindtap="chooseTab" data-tab="waitEvaluate">待评价</view><view class="actionBar__item ui-marginLeft5 ui-flex1 {{ orderType === 'saleSupport' ? 'actionBar__item--active' : '' }}" bindtap="chooseTab" data-tab="saleSupport">退款/售后</view></view><block wx:if="{{ !isFetching || orders.length > 0 }}"><view class="orderList"><view class="order ui-marginTop10" wx:for="{{ orders }}" wx:for-item="order" wx:key="{{ order.orderId }}"><view class="order__header ui-fontSize13"><view class="ui-flex1 ui-blackLighter">{{ order.dateline }}</view><view class="ui-flex" wx:if="{{ ORDER_STATUS.NORMAL === order.orderStatus }}"><view class="ui-highLight">待支付</view><countdown class="ui-highLight ui-marginLeft10" seconds="{{ order.remainingTime }}" format="m:s" bind:over="countdownOver" data-id="{{ order.orderId }}"></countdown></view><view class="ui-highLight" wx:elif="{{ ORDER_STATUS.DONE === order.orderStatus }}">已完成</view><view class="ui-highLight" wx:elif="{{ ORDER_STATUS.CANCELED === order.orderStatus }}">已取消</view><view class="ui-highLight" wx:elif="{{ ORDER_STATUS.REVOKED === order.orderStatus }}">已取消</view><view class="ui-highLight" wx:elif="{{ ORDER_STATUS.PAID === order.orderStatus }}">已支付</view><view class="ui-highLight" wx:elif="{{ ORDER_STATUS.SUPPORTING === order.orderStatus }}">售后处理中</view></view><navigator class="order__body" url="/pages/mine/orderDetail/orderDetail?id={{ order.orderId }}"><view class="ui-flex ui-alignItemsCenter ui-marginTop10" wx:if="{{ order.merchandiseList.length === 1}}"><image class="poster" src="{{ order.merchandiseList[0].squareCoverImage }}"></image><view class="ui-marginLeft10 ui-fontSize14 ui-flex1 ui-marginRight15">{{ order.merchandiseList[0].title }}</view></view><view class="posters ui-marginTop10" wx:else="wx:else"><image class="poster {{ index === 0 ? '' : 'ui-marginLeft10' }}" wx:for="{{ order.merchandiseList }}" wx:for-item="merch" wx:key="{{ merch.merchandiseId }}" src="{{ merch.squareCoverImage }}"></image></view><view class="ui-marginTop10 ui-flex"><view class="label ui-fontSize12">共{{ order.merchandiseList.length }}件商品 总价:</view><view class="ui-highLight">￥{{ filter.toFixed(order.amount, 2) }}</view></view><view class="arrow"></view></navigator><view class="order__footer ui-flex ui-alignItemsCenter"><view class="ui-flex1"></view><navigator class="btn default" wx:if="{{ order.hasShareOrder }}" url="/pages/mine/shareOrderShow/shareOrderShow?orderId={{order.orderId}}&expressId={{order.expressId}}&merchId={{order.merchandiseList[0].merchandiseId}}">我的晒单</navigator><navigator class="btn primary ui-marginLeft10" wx:elif="{{ order.canShare }}" url="/pages/mine/shareOrderCreate/shareOrderCreate?orderId={{order.orderId}}&merchId={{order.merchandiseList[0].merchandiseId}}&expressId={{order.expressId}}">去晒单</navigator><navigator class="btn primary ui-marginLeft10" wx:if="{{ ORDER_STATUS.NORMAL === order.orderStatus }}" bindtap="toPay" data-id="{{ order.orderId }}" data-merch-id="{{ order.merchandiseList[0].merchandiseId }}" data-order-fee="{{ order.amount }}">去支付</navigator><button class="btn default ui-marginLeft10" wx:if="{{ order.canConFirm }}" bindtap="confirmOrder" data-id="{{ order.orderId }}">确认收货</button></view></view></view><view class="orderList--empty" wx:if="{{ orders.length == 0 }}"><image src="https://imgcdn.youhaodongxi.com/weapp/order-list-none-6c09725d3f.png"></image><view class="ui-fontSize14 ui-marginTop30 ui-highLight">甄选师又发现了这么多好东西</view><navigator class="button button--primary" url="/pages/index/index">赶紧去看看</navigator></view></block></view></block><view id="error" wx:if="{{ displayError && !isFetching }}"><view class="content ui-fontSize14 ui-blackLight"><image src="https://imgcdn.youhaodongxi.com/weapp/500-a637418d0e.png"></image><view class="ui-marginTop10" wx:if="{{ displayError }}">{{ displayError.message }}</view><view class="ui-marginTop10" wx:else="wx:else">页面加载失败，请稍后重试~</view><view class="ui-fontSize14 reloadLink" bindtap="reload">重新加载</view></view></view>