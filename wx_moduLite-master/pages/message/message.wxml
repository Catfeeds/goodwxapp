<!--pages/message/message.wxml-->
<view class='app'>
  <!--消息模板  -->
  <template name="tmp-msg">
  <view class='msg-item clear' data-id='{{id}}' bindtap='' bindlongtap=''>
    <view class='head-box' style='background: #ccc url("{{sender.head}}") center / cover  no-repeat'></view>
    <view class='main-box'>
      <view class='main-top'>
        <view class='name'>{{sender.name}}</view>
        <view class='date'>{{date}}</view>
      </view>
      <view class='main-bot'>
        {{message}}
      </view>
    </view>
  </view>
  </template>

  <!--版本二 纯文本消息  -->
  <template name='tmp-text'>
  <view class='text-msg-box'>
    <view class='time'><view class='time-in'>{{time}}</view></view>
    <view class='text-in' data-id='{{id}}' bindlongtap='deleteMsg'>
      <view class='msg-head'><image src='{{logo}}'></image></view>
      <view class='text-box'>
        <view class='text-trigle'></view>
        <view class='text'>{{content}}</view>
      </view>
    </view>
  </view>
  </template>

  <!--图文消息  -->
  <template name='tmp-txtp'>
  <view class='txtp-msg-box'>
    <view class='time'><view class='time-in'>{{time}}</view></view>
    <view class='txtp-in' data-id='{{id}}' bindlongtap='deleteMsg' bindtap='viewDetail' bindtouchstart='mytouchstart' bindtouchend='mytouchend'>
      <view class='txtp-title'>
        <image src='{{logo}}'></image>
        <text>掌上魔都</text>
      </view>
      <view class='msg-cont'>
        <view class='msg-txt'>{{words}}……</view>
        <view class='msg-pic' style='background: url("{{image}}") top / cover no-repeat;'></view>
      </view>
      <view class='txtp-bot'>详情</view>
    </view>
  </view>
  </template>


  <!--消息流  -->
   <view>
    <block wx:for="{{list}}">
      <block wx:if="{{item.type == 1}}">
        <template is="tmp-text" data="{{...item, logo}}"></template>
      </block>
      <block wx:if="{{item.type == 2}}">
        <template is="tmp-txtp" data="{{...item, logo}}"></template>
      </block>
    </block>
  </view> 


  <view class='load-more {{hide}}'>
    <view class='more-inner'><icon type='waiting' size='16' color='#ccc'></icon>暂无消息</view>
  </view>

</view>