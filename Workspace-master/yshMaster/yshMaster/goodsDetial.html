<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
		<meta name="description" content="">
		<meta name="author" content="ThemeBucket">
		<link rel="shortcut icon" href="#" type="image/png">
		<title>商品管理</title>
		<link rel="stylesheet" type="text/css" href="js/ios-switch/switchery.css" />
		<link href="css/style.css" rel="stylesheet">
		<link href="css/style-responsive.css" rel="stylesheet">
		<link rel="stylesheet" href="js/control/css/zyUpload.css" type="text/css">
		<link href="js/iCheck/skins/flat/green.css" rel="stylesheet">
		<link rel="stylesheet" type="text/css" href="css/select2.min.css"/>
		<script src="js/jquery-1.10.2.min.js"></script>
		<script src="js/ysh_comm.js"></script>
		<script type="text/javascript">
			checkPermission();
		</script>
	</head>

	<body style="background: #EFF0F4;">
		<section>
			<div>
				<section class="panel">
					<div class="panel-body">
						<div class="page-heading">
							<h3 id="title"></h3>
							<ul class="breadcrumb">

							</ul>
						</div>
					</div>
				</section>

				<section class="wrapper">
					<section class="panel">
						<div class="panel-body" id="bodyview">
							<div class="row" style="height: 14px;"></div>
							<div class="row">
								<div class="col-lg-1" style="text-align: right;">
									<div style="margin-top: 7px;">商品编号</div>
								</div>
								<div class="col-lg-2">
									<input onchange="goodCodeCheck()" id="goodCode" name="goodCode" type="number" class="form-control formData">
								</div>
								<div class="col-lg-1"><span style="color: red;">*</span></div>
								<div class="col-lg-1" style="text-align: right;">
									<div style="margin-top: 7px;">商品名称</div>
								</div>
								<div class="col-lg-2">
									<input id="goodName" name="goodName" type="text" class="form-control formData">
								</div>
								<div class="col-lg-1"><span style="color: red;">*</span></div>
								<div class="col-lg-1" style="text-align: right;">
									<div style="margin-top: 7px;">商店</div>
								</div>
								<div class="col-lg-2">
									<select class="form-control m-bot15 formData" id="store" name="store" onchange="getYunFei(this.value)"></select>
								</div>
								<div class="col-lg-1"><span style="color: red;">*</span></div>
							</div>
							<div class="row" style="height: 14px;"></div>
							<div class="row">
								<div class="col-lg-1" style="text-align: right;">
									<div style="margin-top: 7px;">运费模板</div>
								</div>
								<div class="col-lg-2">
									<select class="form-control m-bot15 formData" id="udframe"></select>
								</div>
								<div class="col-lg-1"><span style="color: red;">*</span></div>
							</div>
							<div class="row" style="height: 14px;"></div>
							<div class="row">
								<div class="col-lg-1" style="text-align: right;">
									<div style="margin-top: 7px;">默认规格</div>
								</div>
								<div class="col-lg-1">
									<input id="specificationsName" type="number" class="form-control formData">
								</div>
								<div class="col-lg-2">
									<select class="form-control m-bot15 formData" id="unit" onchange="changeUnit(this.value)"></select>
								</div>
								<div id="UnitInit" style="display: none;" flag='0'>
									<div class="col-lg-1" style="text-align: center;">
										<div style="margin-top: 7px;">/</div>
									</div>
									<div class="col-lg-1">
										<input id="UnitEnty" class="form-control formData" onchange="this.value=this.value.replace(/[^123456789xX]/g, '')" maxlength="18" type="number" value="1">
									</div>
									<div class="col-lg-1" style="text-align: center;">
										<div style="margin-top: 7px;">公斤</div>
									</div>
								</div>

								<div class="col-lg-1"><span style="color: red;">*</span></div>

							</div>
							<div class="row" style="height: 14px;"></div>
							<div class="row">
								<div class="col-lg-1" style="text-align: right;">
									<div style="margin-top: 7px;">商品分类</div>
								</div>
								<div class="col-lg-3">
									<select class="form-control m-bot15 formData" id="catSelect" name="catSelect"></select>
								</div>
								<div class="col-lg-1" style="text-align: right;">
									<div style="margin-top: 7px;">商品品牌</div>
								</div>
								<div class="col-lg-2">
									<input id="Productbrand" name="Productbrand" type="text" class="form-control formData">
								</div>
								<div class="col-lg-1"><span style="color: red;">*</span></div>
							</div>
							<div class="row" style="height: 14px;"></div>
							<div class="row">
								<div class="col-lg-1" style="text-align: right;">
									<div style="margin-top: 7px;">商品简介</div>
								</div>
								<div class="col-lg-3">
									<textarea style="resize: none;" rows="6" class="form-control" id="goodDetial" name="goodDetial"></textarea>
								</div>
							</div>
							<div class="row" style="height: 14px;"></div>
							<div class="row">
								<div class="col-lg-1" style="text-align: right;">
									<div style="margin-top: 7px;">商品价格</div>
								</div>
								<div class="col-lg-2">
									<input type="number" min="0" class="form-control formData" id="price" name="price">
								</div>
								<div class="col-lg-1"><span style="color: red;">*</span></div>
								<!--结算价格-->
								<div class="col-lg-1" style="text-align: right;">
									<div style="margin-top: 7px;">结算价格</div>
								</div>
								<div class="col-lg-2">
									<input type="number" class="form-control formData" id="StateMent" name="StateMent" min="0">
								</div>
								<div class="col-lg-1"><span style="color: red;">*</span></div>
								
								<div class="col-lg-1" style="text-align: right;">
									<div style="margin-top: 7px;">商品库存</div>
								</div>
								<div class="col-lg-2">
									<input type="number" min="0" class="form-control formData" id="goodNum" name="goodNum">
								</div>
								<div class="col-lg-1"><span style="color: red;">*</span></div>
							</div>
							<div class="row">
								<div class="col-lg-1" style="text-align: right;">
									<div style="margin-top: 14px;">商品图片</div>
								</div>
								<div class="col-lg-3">
									<div id="zyUpload" class="zyUpload" url="1"></div>
									上传图片大小不超过<span style="color: red;padding-top: 10px;">2M</span>
								</div>
							</div>

							<div class="row" style="height: 14px;"></div>
							<div class="row">
								<div class="col-lg-1" style="text-align: right;">
									<div style="margin-top: 7px;">使用积分</div>
								</div>
								<div class="col-lg-3">
									<input type="checkbox" class="js-switch" id="integral" name="integral" checked/>
								</div>
							</div>
							<div class="row" style="height: 14px;"></div>
							<div class="row">
								<div class="col-lg-1" style="text-align: right;">
									<div style="margin-top: 7px;">上架状态</div>
								</div>
								<div class="col-lg-3">
									<input type="checkbox" class="js-switch" id="status" name="status" checked/>
								</div>
							</div>
							<div class="row" style="height: 14px;"></div>
							<div class="row">
								<div class="col-lg-1" style="text-align: right;">
									<div style="margin-top: 7px;">详细介绍</div>
								</div>
								<div class="col-lg-10">
									<iframe src="http://f.yshfresh.com/Editor.html" scrolling="no" frameborder='0' style="width: 100%;height: 500px;" name="irm" id="irm"></iframe>
									<!--<textarea  style="resize: none;" maxlength="30000" class="form-control ckeditor" style="height: 350px;" name="editor_descript" rows="6" id="editor_descript"></textarea>-->
								</div>
							</div>
							<div class="row" style="height: 14px;"></div>
							<div class="row">
								<div class="col-lg-1" style="text-align: right;"></div>
								<div class="col-lg-10">
									<button class="btn btn-primary saveButton" onclick="checkProCode()">保存</button>
								</div>
							</div>
						</div>
						<div class="row" style="height: 14px;"></div>
					</section>
				</section>
			</div>
		</section>
		<!-- Placed js at the end of the document so the pages load faster -->
		<script src="js/jquery-1.10.2.min.js"></script>
		<script src="js/jquery-ui-1.9.2.custom.min.js"></script>
		<script src="js/jquery-migrate-1.2.1.min.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<script src="js/modernizr.min.js"></script>
		<script src="js/jquery.nicescroll.js"></script>
		<!-- 引用核心层插件 -->
		<script type="text/javascript" src="js/core/zyFile.js"></script>
		<!-- 引用控制层插件 -->
		<script type="text/javascript" src="js/control/js/zyUpload.js"></script>
		<!-- 引用初始化JS -->
		<script type="text/javascript" src="js/zyUpload.js"></script>
		<!--common scripts for all pages-->
		<script src="js/scripts.js"></script>
		<script src="js/ios-switch/switchery.js"></script>
		<script src="js/ios-switch/ios-init.js"></script>
		<script src="js/ysh_comm.js"></script>
		<script src="script/goodsDetial.js"></script>
		<script src="js/layer.js"></script>
		<script src="js/laytpl.js"></script>
		<script src="plugins/ckeditor/ckeditor.js"></script>
		<script src="js/select2.min.js"></script>
		
		<script>
			$(document).ready(function() {
				$('select').select2();
				setIframeHeight()
			});
		</script>
		<script type="text/javascript">
			function sendMsgz() {
				if(typeof window.postMessage == undefined) {
					alert("对不起 您的浏览器不支持 postMessage 特性，请换浏览器");
					return false;
				}
				var msg = decodeURI(window.localStorage.getItem("FullDescriptionInit"))
				$("#FullDescriptionInit").hide()
				$("#irm").show()
				setIframeHeight()
				document.getElementsByTagName("iframe")[0].contentWindow.postMessage(msg, imgurl + "/Editor.html");
			}
			var originWhiteList = [imgurl + "/Editor.html"];

			function checkWhiteList(origin) {
				for(var i = 0; i < originWhiteList.length; i++) {
					if(origin == originWhiteList[i]) {
						return true;
					}
				}
				return false;
			}
			/** 接受消息 */
			function messageHandler(e) {
				goods.FullDescription = e.data
				alert("生成成功")
			}
			window.addEventListener("message", messageHandler, true);
		</script>
	</body>

</html>
<script id="tpl" type="text/html">
	<div class="row" style="height: 14px;"></div>
	<div class="row">
		<div class="col-lg-1" style="text-align: right;">
			<div style="margin-top: 7px;">商品编号</div>
		</div>
		<div class="col-lg-2">
			<input readonly="readonly" id="goodCode" value="{{d.Code}}" name="goodCode" type="number" class="form-control formData">
		</div>
		<div class="col-lg-1"><span style="color: red;">*</span></div>
		<div class="col-lg-1" style="text-align: right;">
			<div style="margin-top: 7px;">商品名称</div>
		</div>
		<div class="col-lg-2">
			<input id="goodName" value="{{d.ProductName}}" name="goodName" type="text" class="form-control formData">
		</div>
		<div class="col-lg-1"><span style="color: red;">*</span></div>
		<div class="col-lg-1" style="text-align: right;">
			<div style="margin-top: 7px;">商店</div>
		</div>
		<div class="col-lg-2">
			<select class="form-control m-bot15 formData" id="store" name="store">

			</select>
		</div>
		<div class="col-lg-1"><span style="color: red;">*</span></div>
	</div>
	<div class="row" style="height: 14px;"></div>
	<div class="row">
		<div class="col-lg-1" style="text-align: right;">
			<div style="margin-top: 7px;">商品分类</div>
		</div>
		<div class="col-lg-2">
			<select class="form-control m-bot15 formData" id="catSelect" name="catSelect" value="{{d.CategoryId}}"></select>
		</div>
		<div class="col-lg-1"><span style="color: red;">*</span></div>
		<div class="col-lg-1" style="text-align: right;">
			<div style="margin-top: 7px;">商品品牌</div>
		</div>
		<div class="col-lg-2">
			<input id="Productbrand" value="{{d.Productbrand}}" name="Productbrand" type="text" class="form-control formData">
		</div>
		<div class="col-lg-1"><span style="color: red;">*</span></div>
		<div class="col-lg-1" style="text-align: right;">
			<div style="margin-top: 7px;">运费模板</div>
		</div>
		<div class="col-lg-2">
			<select class="form-control m-bot15 formData" id="udframe" value="{{}}"></select>
		</div>
		<div class="col-lg-1"><span style="color: red;">*</span></div>
	</div>
	<div class="row" style="height: 14px;"></div>
	
	<div class="row">
		<div class="col-lg-1" style="text-align: right;">
			<div style="margin-top: 7px;">商品简介</div>
		</div>
		<div class="col-lg-3">
			<textarea style="resize: none;" rows="6" class="form-control" id="goodDetial" name="goodDetial" style="resize: none;">
				{{d.ShortDescription}}
			</textarea>
		</div>
	</div>
	<div class="row" style="height: 14px;"></div>
	<div class="row">
		<div class="col-lg-1" style="text-align: right;">
			<div style="margin-top: 7px;">上架状态</div>
		</div>
		<div class="col-lg-3">
			<input type="checkbox" class="js-switch" id="status" name="status" checked/>
		</div>
	</div>
	<div class="row" style="height: 14px;"></div>
	<div class="row">
		<div class="col-lg-1" style="text-align: right;">
			<span>详细介绍</span>
		</div>
		<div class="col-lg-10">
			<div class="col-lg-10">
				<div id="FullDescriptionInit">
					{{d.FullDescription||""}}
				</div>
				<iframe src="http://f.yshfresh.com/Editor.html" scrolling="no" frameborder='0' style="width: 100%;height: 500px;display: none;" name="irm" id="irm"></iframe>
			</div>
		</div>

	</div>
	<div class="row " style="height: 14px; "></div>
	<div class="row ">
		<div class="col-lg-1 " style="text-align: right; "></div>
		<div class="col-lg-5 ">
			<button class="btn btn-primary saveButton " onclick="sendMsgz()">编辑详细介绍</button>
		</div>
		<div class="col-lg-5 ">
			<button class="btn btn-primary saveButton " onclick="checkProCode()">保存</button>
		</div>
	</div>
</script>