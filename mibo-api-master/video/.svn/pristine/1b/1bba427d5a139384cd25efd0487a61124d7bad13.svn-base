<?php

class Model_RechargeItem extends PhalApi_Model_NotORM {

    protected function getTableName($id) {
        return 'recharge_item';
    }

    public function getRechargeItemList() {
        $key = "recharge_item_list";
        $list_string = DI()->redis->get_time($key);
        if (empty($list_string)) {
            $item_list = $this->getORM()
                ->select("id, diamond_num, extra_num, price")
                ->where("is_show = 1 and type = 0")
                ->order('sort ASC')
                ->fetchAll();
            DI()->redis->set_time($key, json_encode($item_list), 3600);
        } else {
            $item_list = json_decode($list_string, true);
        }
        return $item_list;
    }

    public function getItemById($id) {
        return $this->getORM()->where('id = ?', $id)->fetch();
    }




}
