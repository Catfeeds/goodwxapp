<!DOCTYPE html>
<html>
<head>
<title>database-doc</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style type="text/css">
/* GitHub stylesheet for MarkdownPad (http://markdownpad.com) */
/* Author: Nicolas Hery - http://nicolashery.com */
/* Version: b13fe65ca28d2e568c6ed5d7f06581183df8f2ff */
/* Source: https://github.com/nicolahery/markdownpad-github */

/* RESET
=============================================================================*/

html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video {
  margin: 0;
  padding: 0;
  border: 0;
}

/* BODY
=============================================================================*/

body {
  font-family: Helvetica, arial, freesans, clean, sans-serif;
  font-size: 14px;
  line-height: 1.6;
  color: #333;
  background-color: #fff;
  padding: 20px;
  max-width: 960px;
  margin: 0 auto;
}

body>*:first-child {
  margin-top: 0 !important;
}

body>*:last-child {
  margin-bottom: 0 !important;
}

/* BLOCKS
=============================================================================*/

p, blockquote, ul, ol, dl, table, pre {
  margin: 15px 0;
}

/* HEADERS
=============================================================================*/

h1, h2, h3, h4, h5, h6 {
  margin: 20px 0 10px;
  padding: 0;
  font-weight: bold;
  -webkit-font-smoothing: antialiased;
}

h1 tt, h1 code, h2 tt, h2 code, h3 tt, h3 code, h4 tt, h4 code, h5 tt, h5 code, h6 tt, h6 code {
  font-size: inherit;
}

h1 {
  font-size: 28px;
  color: #000;
}

h2 {
  font-size: 24px;
  border-bottom: 1px solid #ccc;
  color: #000;
}

h3 {
  font-size: 18px;
}

h4 {
  font-size: 16px;
}

h5 {
  font-size: 14px;
}

h6 {
  color: #777;
  font-size: 14px;
}

body>h2:first-child, body>h1:first-child, body>h1:first-child+h2, body>h3:first-child, body>h4:first-child, body>h5:first-child, body>h6:first-child {
  margin-top: 0;
  padding-top: 0;
}

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
  margin-top: 0;
  padding-top: 0;
}

h1+p, h2+p, h3+p, h4+p, h5+p, h6+p {
  margin-top: 10px;
}

/* LINKS
=============================================================================*/

a {
  color: #4183C4;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

/* LISTS
=============================================================================*/

ul, ol {
  padding-left: 30px;
}

ul li > :first-child, 
ol li > :first-child, 
ul li ul:first-of-type, 
ol li ol:first-of-type, 
ul li ol:first-of-type, 
ol li ul:first-of-type {
  margin-top: 0px;
}

ul ul, ul ol, ol ol, ol ul {
  margin-bottom: 0;
}

dl {
  padding: 0;
}

dl dt {
  font-size: 14px;
  font-weight: bold;
  font-style: italic;
  padding: 0;
  margin: 15px 0 5px;
}

dl dt:first-child {
  padding: 0;
}

dl dt>:first-child {
  margin-top: 0px;
}

dl dt>:last-child {
  margin-bottom: 0px;
}

dl dd {
  margin: 0 0 15px;
  padding: 0 15px;
}

dl dd>:first-child {
  margin-top: 0px;
}

dl dd>:last-child {
  margin-bottom: 0px;
}

/* CODE
=============================================================================*/

pre, code, tt {
  font-size: 12px;
  font-family: Consolas, "Liberation Mono", Courier, monospace;
}

code, tt {
  margin: 0 0px;
  padding: 0px 0px;
  white-space: nowrap;
  border: 1px solid #eaeaea;
  background-color: #f8f8f8;
  border-radius: 3px;
}

pre>code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent;
}

pre {
  background-color: #f8f8f8;
  border: 1px solid #ccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px;
}

pre code, pre tt {
  background-color: transparent;
  border: none;
}

kbd {
    -moz-border-bottom-colors: none;
    -moz-border-left-colors: none;
    -moz-border-right-colors: none;
    -moz-border-top-colors: none;
    background-color: #DDDDDD;
    background-image: linear-gradient(#F1F1F1, #DDDDDD);
    background-repeat: repeat-x;
    border-color: #DDDDDD #CCCCCC #CCCCCC #DDDDDD;
    border-image: none;
    border-radius: 2px 2px 2px 2px;
    border-style: solid;
    border-width: 1px;
    font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
    line-height: 10px;
    padding: 1px 4px;
}

/* QUOTES
=============================================================================*/

blockquote {
  border-left: 4px solid #DDD;
  padding: 0 15px;
  color: #777;
}

blockquote>:first-child {
  margin-top: 0px;
}

blockquote>:last-child {
  margin-bottom: 0px;
}

/* HORIZONTAL RULES
=============================================================================*/

hr {
  clear: both;
  margin: 15px 0;
  height: 0px;
  overflow: hidden;
  border: none;
  background: transparent;
  border-bottom: 4px solid #ddd;
  padding: 0;
}

/* TABLES
=============================================================================*/

table th {
  font-weight: bold;
}

table th, table td {
  border: 1px solid #ccc;
  padding: 6px 13px;
}

table tr {
  border-top: 1px solid #ccc;
  background-color: #fff;
}

table tr:nth-child(2n) {
  background-color: #f8f8f8;
}

/* IMAGES
=============================================================================*/

img {
  max-width: 100%
}
</style>
</head>
<body>
<p>[TOC]</p>
<h1>米播数据库文档</h1>
<p><img src="./image/table-structure.png" alt="表" title="表" /></p>
<h2>基础</h2>
<p>表前缀：mb_</p>
<h2>一、表结构</h2>
<h3>activity</h3>
<p><code>直播间的活动按钮表</code>
 <img src="./image/activity.png" alt="activity" title="activity" /></p>
<h3>activity_statistic</h3>
<p><code>活动结果统计表</code>
<img src="./image/activity_statistic.png" alt="activity_statistic" title="activity_statistic" /></p>
<blockquote>
<p>value: 活动相关结果，如每日抽奖的中奖id</p>
</blockquote>
<h3>ad</h3>
<p><code>广告</code>
<img src="./image/ad.png" alt="ad" title="ad" /></p>
<blockquote>
<p>开机广告</p>
</blockquote>
<h3>app_config</h3>
<p><code>app配置表</code>
<img src="./image/app_config.png" alt="app_config" title="app_config" /></p>
<blockquote>
<p>event: 相关于键<br />
event_data: 相关于值 </p>
</blockquote>
<h3>apply_config</h3>
<p><code>申请主播表</code></p>
<blockquote>
<p>已经废弃</p>
</blockquote>
<h3>banner</h3>
<p><img src="./image/banner.png" alt="banner" title="banner" /></p>
<h3>black_list</h3>
<blockquote>
<p>没用到</p>
</blockquote>
<h3>channel</h3>
<blockquote>
<p>没用到</p>
</blockquote>
<h3>exchange_item</h3>
<p><code>米钻兑换米币表</code>
<img src="./image/exchange_item.png" alt="exchange_item" title="exchange_item" /></p>
<h3>feedback</h3>
<p><code>用户反馈表</code>
<img src="./image/feedback.png" alt="feedback" title="feedback" /></p>
<blockquote>
<p>audit_status: 这个审核字段暂时没用到</p>
</blockquote>
<h3>feedback_type</h3>
<p><code>用户反馈类型列表</code>
<img src="./image/feedback_type.png" alt="feedback_type" title="feedback_type" /></p>
<h3>follow_list</h3>
<p><code>关注关系表</code>
<img src="./image/follow_list.png" alt="follow_list" title="follow_list" /></p>
<h3>game</h3>
<blockquote>
<p>暂时没用</p>
</blockquote>
<h3>game<em>loop</em>card_log</h3>
<p><code>发牌记录表</code>
<img src="./image/game_loop_card_log.png" alt="game_loop_card_log" title="game_loop_card_log" /></p>
<blockquote>
<p>start<em>server</em>time 服务器的发牌时间，发送给前端，用以判断该局是否有效，超过25s此局牌无效</p>
</blockquote>
<h3>game<em>loop</em>settlement</h3>
<p><code>下注结算表</code>
<img src="./image/game_loop_settlement.png" alt="game_loop_settlement" title="game_loop_settlement" /></p>
<h3>gift</h3>
<p><code>直播间礼物列表</code>
<img src="./image/gift.png" alt="gift" title="gift" /></p>
<blockquote>
<p>local_target: 前端用以代码处理礼物的标志</p>
</blockquote>
<h3>gift_effect</h3>
<blockquote>
<p>没用到</p>
</blockquote>
<h3>gift_effect</h3>
<blockquote>
<p>暂没用</p>
</blockquote>
<h3>gift_package</h3>
<p><code>礼包表</code>
<img src="./image/gift_package.png" alt="gift_package" title="gift_package" /></p>
<blockquote>
<p>礼包只要是直播间定时弹出，有些礼包只能发送一次，发送过的记录在gift<em>package</em>log表中</p>
</blockquote>
<h3>gift<em>package</em>log</h3>
<p><code>礼包表记录</code>
<img src="./image/gift_package_log.png" alt="gift_package_log" title="gift_package_log" /></p>
<h3>gm</h3>
<p><code>后台发入钻石、米币记录</code>
<img src="./image/gm.png" alt="gm" title="gm" /></p>
<blockquote>
<p>接口并没用到，主要是管理后台使用</p>
</blockquote>
<h3>im_log</h3>
<p><code>环信发消息记录</code></p>
<blockquote>
<p>此表貌似并没有用，打算废弃，因为环信有聊天记录</p>
</blockquote>
<h3>im_protocol</h3>
<blockquote>
<p>没用</p>
</blockquote>
<h3>internal_staff</h3>
<p><code>内部人员表</code>
<img src="./image/internal_staff.png" alt="internal_staff" title="internal_staff" /></p>
<blockquote>
<p>内部人员功能：送礼物无效、发直播普通用户看不到</p>
</blockquote>
<h3>ios_staff</h3>
<blockquote>
<p>ios版本更新</p>
</blockquote>
<h3>live<em>entry</em>log</h3>
<p><code>用户进入直播间记录</code>
<img src="./image/live_entry_log.png" alt="live_entry_log" title="live_entry_log" /></p>
<blockquote>
<p>进入、退出使用</p>
</blockquote>
<h3>live_entend</h3>
<p><code>直播间扩展信息表</code></p>
<blockquote>
<p>目前用于视频回放的观看人数</p>
</blockquote>
<h3>live_game</h3>
<blockquote>
<p>以前用于切换游戏，现在没用</p>
</blockquote>
<h3>live_list</h3>
<p><code>直播列表、包括娱乐场的几个</code>
<img src="./image/live_list.png" alt="live_list" title="live_list" /></p>
<blockquote>
<p>包括封面、推流地址、回放地址等
flv<em>url没用到，ticket</em>price,ticket<em>sale,invite</em>code以前是门票功能使用的，现在没用</p>
</blockquote>
<h3>loading_icon</h3>
<blockquote>
<p>加载icon,就是首页下拉刷新的几个小图标</p>
</blockquote>
<h3>moudel</h3>
<blockquote>
<p>没用</p>
</blockquote>
<h3>no<em>anchor</em>live</h3>
<blockquote>
<p>无主播场，即娱乐场的相关信息，目前就是用于娱乐场的底图</p>
</blockquote>
<h3>open_statistic</h3>
<blockquote>
<p>打开app统计，目前没用</p>
</blockquote>
<h3>operation_live</h3>
<p><code>直播运营审核表</code>
<img src="./image/operation_live.png" alt="operation_live" title="operation_live" /></p>
<blockquote>
<p>主要是运营在管理后台审核直播，因为目前我们的主播都是签约的</p>
</blockquote>
<h3>pk_dealer</h3>
<blockquote>
<p>以pk前缀的都是pk场的，这个是pk场庄家记录</p>
</blockquote>
<h3>pk_loop_card_log</h3>
<blockquote>
<p>pk场发牌记录</p>
</blockquote>
<h3>pk<em>loop</em>settlement</h3>
<blockquote>
<p>pk场玩家结算</p>
</blockquote>
<h3>pk_room</h3>
<blockquote>
<p>pk房间列表</p>
</blockquote>
<h3>recharge_ios</h3>
<blockquote>
<p>ios支付后的验证收据，只记录，暂无他用</p>
</blockquote>
<h3>recharge_item</h3>
<p><code>钻石、米币充值价格表</code>
<img src="./image/recharge_item.png" alt="recharge_item" title="recharge_item" /></p>
<h3>recharge_log</h3>
<p><code>充值记录表</code>
<img src="./image/recharge_log.png" alt="recharge_log" title="recharge_log" /></p>
<h3>region_city</h3>
<blockquote>
<p>没用</p>
</blockquote>
<h3>region_district</h3>
<blockquote>
<p>没用</p>
</blockquote>
<h3>region_province</h3>
<blockquote>
<p>没用</p>
</blockquote>
<h3>report</h3>
<p><code>举报表</code>
<img src="./image/report.png" alt="report" title="report" /></p>
<blockquote>
<p>直播间举报</p>
</blockquote>
<h3>room_admin</h3>
<blockquote>
<p>主播的房管</p>
</blockquote>
<h3>share_log</h3>
<blockquote>
<p>分享相关记录</p>
</blockquote>
<h3>splash_screen</h3>
<blockquote>
<p>没用</p>
</blockquote>
<h3>task</h3>
<blockquote>
<p>每日任务列表，img字段没用到</p>
</blockquote>
<h3>user</h3>
<blockquote>
<p>用户表，login_name, is_anchor两个已经弃用</p>
</blockquote>
<h3>user<em>deal</em>log</h3>
<blockquote>
<p>用户交易记录，发送礼物、钻石兑换米币</p>
</blockquote>
<h3>user<em>experience</em>log</h3>
<blockquote>
<p>用户经验记录</p>
</blockquote>
<h3>user<em>id</em>card</h3>
<blockquote>
<p>用户实名认证的身份证记录</p>
</blockquote>
<h3>user_level</h3>
<blockquote>
<p>等级需要的经验</p>
</blockquote>
<h3>user_login</h3>
<blockquote>
<p>用户登录记录</p>
</blockquote>
<h3>user_phone</h3>
<blockquote>
<p>没用</p>
</blockquote>
<h3>user<em>wealth</em>log</h3>
<blockquote>
<p>用户米钻、米币变化记录，目前就提供给大龙的更新财富接口用到</p>
</blockquote>
<h3>verify_code</h3>
<blockquote>
<p>验证码，好像没用，验证码目前用缓存。验证码主要是用户手机注册用。</p>
</blockquote>
<h3>version</h3>
<blockquote>
<p>Android版本更新</p>
</blockquote>
<h3>vip_privilege</h3>
<blockquote>
<p>vip特权表</p>
</blockquote>
<h3>withdraw</h3>
<blockquote>
<p>主播提现表，以前是用以微信主播提现，目前没用。</p>
</blockquote>
<h2>二、表关系</h2>
<ol>
<li>
<p>主要表：</p>
<ul>
<li>game_loop_card_log 每局牌记录,游戏的主要表</li>
<li>game_loop_settlement 每局用户结算，游戏的主要表</li>
<li>live_list 直播列表，推流、观看、回看地址等直播重要信息</li>
<li>recharge_log 充值记录，这个是充值是否成功、钻石是否发放、下单时间相关的</li>
<li>user 用户信息表，这个基本上每时每刻都会用到，用户登录的基本表</li>
<li>user_deal_log  这个是送礼物的记录表，也比较重要</li>
<li>app_config app配置表，其实主要是用于iOS审核用</li>
</ul>
</li>
<li>
<p>表互相关系 </p>
</li>
</ol>
<blockquote>
<p>表与表之间的耦合度不紧密，没有哪些行为是必须多表的，即每个表相对独立的</p>
</blockquote>

</body>
</html>
<!-- This document was created with MarkdownPad, the Markdown editor for Windows (http://markdownpad.com) -->
