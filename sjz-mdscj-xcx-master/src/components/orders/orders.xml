<view>
  <scroll-view class="order-view" scroll-y="{{true}}" scroll-x="{{false}}"
    bindscrolltolower="handleNextPage">
    <view class="order-item" wx:for="{{props.list}}" wx:key="{{index}}">
      <view class="order-title">
        <text class="content">订单编号：{{item.orderNo}}</text>
        <text class="status" wx:if="{{item.status === 'SUBMITTED'}}">待付款</text>
        <text class="status" wx:if="{{item.status === 'SHIPPED'}}">待收货</text>
        <text class="status" wx:if="{{item.status === 'WAIT_SHIPPING'}}">已付款，待发货</text>
        <text class="status" wx:if="{{item.status === 'CANCELLED'}}">已取消</text>
        <text class="status" wx:if="{{item.status === 'FINISHED'}}">已完成</text>
        <text class="status" wx:if="{{item.status === 'CLOSED'}}">已关闭</text>
      </view>
      <navigator class="order-content" hover-class="none"
        url="{{'../order/detail?orderNo=' + item.orderNo}}">
        <view class="content-item" wx:for="{{item.orderItems}}" wx:key="{{index}}">
          <image class="order-product" src="{{item.orderItem.img}}"></image>
          <view class="product-name">
            <text>{{item.orderItem.productName}}</text>
          </view>
          <view class="sku-detail">
            <text>{{item.orderItem.skuStr}}</text>
          </view>
          <view class="price-info">
            <view class="price">
              ¥ {{item.orderItem.promotionPrice / 100}}
            </view>
            <view class="count">
              x {{item.orderItem.quantity}}
            </view>
          </view>
        </view>
      </navigator>
      <view class="price-count">
        总计：<text class="amount">¥{{item.paymentAmount / 100 || 0}}</text>（含运费¥{{item.logisticAmount / 100 || 0}}）
      </view>
      <view class="operation" wx:if="{{item.status && item.status !== 'CANCELLED' && item.status !== 'FINISHED'}}">
        <button type="default" class="important" data-order-index="{{index}}" catchtap="handleSignOrder"
          wx:if="{{item.status === 'SHIPPED'}}">确认收货</button>
        <!--<button type="default"
          wx:if="{{item.status === 'SHIPPED' && !item.delayedSign}}">延长收货</button>-->
        <button type="default" class="important" data-order-index="{{index}}" catchtap="handlePayOrder"
          wx:if="{{item.status === 'SUBMITTED'}}">立即支付</button>
        <button type="default" data-order-index="{{index}}" catchtap="handleCancelOrder"
          wx:if="{{item.status === 'SUBMITTED'}}">取消订单</button>
        <button type="default" data-order-index="{{index}}" catchtap="handleDeleteOrder"
          wx:if="{{!item.status}}">删除订单</button>
        <!--<button type="default"
          wx:if="{{'SHIPPED' === item.status || 'SUCCESS' === item.status}}">查看物流</button>-->
      </view>
    </view>
  </scroll-view>
</view>
