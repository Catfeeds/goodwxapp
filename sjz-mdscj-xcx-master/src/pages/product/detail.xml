<form bindsubmit="formSubmit" report-submit='true'>
  <button formType="submit" class="formIdBtn">
    <view class="product">
      <view class="swiper-wrap">
        <swiper
          class="swiper"
          indicator-dots="{{state.indicatorDots}}"
          autoplay="{{state.autoplay}}" interval="{{state.interval}}" duration="{{state.duration}}">
          <block wx:key="*this" wx:for="{{props.detail.images}}">
            <swiper-item>
              <image src="{{item.url}}" mode="aspectFill" class="swiper-banner"/>
            </swiper-item>
          </block>
        </swiper>
      </view>

      <view class="promotion-info">
        <view class="promotion-tuan" wx:if="{{state.proType === 'TUAN' && state.promotionStatus === 'STAY'}}">
          <view class="tuan-l">
            <view>{{state.showData.startMonth}}.{{state.showData.startDay}}日拼团价</view>
            <view><text class="price">{{state.priceCurrentTuan}}</text> {{props.detail.promotion.groupNum}}人团</view>
          </view>
          <view class="tuan-r">
            <view>距拼团开始还剩</view>
            <view class="countDown">{{state.countdownData.days}}<text>天</text>{{state.countdownData.hours}}<text>时</text>{{state.countdownData.minutes}}<text>分</text>{{state.countdownData.seconds}}<text>秒</text></view>
          </view>
        </view>
      </view>

      <view class="product-info">
        <text class="product-name">{{props.detail.name}}</text>
        <text class="product-sub-name" wx:if="{{props.detail.subName}}">{{props.detail.subName}}</text>
        <view class="pro-price">
          <text class="product-price" wx:if="{{props.detail.priceSummary}}"><text>￥</text>{{(props.detail.priceSummary.minDiscountPrice || props.detail.priceSummary.minSkuPrice) / 100}}</text>
          <text class="product-old-price" wx:if="{{props.detail.priceSummary.minDiscountPrice}}">原价:<text>{{props.detail.priceSummary.maxSkuPrice / 100}}</text></text>
          <text class="pro-tag" wx:if="{{state.proType === 'TUAN' && state.promotionStatus === 'INPROGRESS'}}">拼团</text>
        </view>

      </view>

      <block wx:if="{{state.isShowCopyTips}}">
        <view class="copy-tips"><text>Tips </text>{{state.isCopyed ? '您已复制优惠成功，打开APP购买即可' : '复制失败，请更新微信版本到最新版'}}</view>
      </block>

      <view class="product-icons flex items-center justify-around">
        <view><image class="product-icon" src="../../images/guarantee-1.png"/>官方优选</view>
        <view><image class="product-icon" src="../../images/guarantee-2.png"/>正品保证</view>
        <view><image class="product-icon" src="../../images/guarantee-3.png"/>担保交易</view>
        <view><image class="product-icon" src="../../images/guarantee-4.png"/>{{props.detail.deliveryTerm}}内发货</view>
      </view>
      <view class="product-margin"></view>
      <view class="promotion-tips">
        <view class="tips-tuan" wx:if="{{state.proType === 'TUAN'}}">
          <icon type="info" size="20" color="#ff2551"/> 拼团商品规则：
          <text>{{state.promotionStatus === 'INPROGRESS' ? '下单支付后开团，邀请好友一起参团。若拼团成功，则会发货。若24小时内拼团失败，将自动退款。' : '未开团时购买并非拼团价，还请注意！！'}}</text>
        </view>
      </view>
      <view class="product-desc">
        <text class="product-desc-title">图文详情</text>
        <view class="product-desc-title-border"></view>
        <view class="product-desc-notice2">
          <text>购买须知：</text>优惠信息具有很强的时效性。如在购买后，遇到该商品【已经无货 或 价格过期】我们会为您全额退款，还请放心购买！
        </view>

        <view class="product-desc-notice">
          <image src="http://img-prod.kkkd.com/FlFzE2uHHcUMDwhtuKJaZ8p_Yf3L"></image>
        </view>

        <view class="product-desc-imgs">
          <block wx:for="{{props.detail.descElements}}" wx:key="*this">
            <image class="product-desc-img" wx:if="{{item.type === 'IMAGE'}}" mode="widthFix" src="{{item.content}}"/>
            <text wx:else="">{{item.content}}</text>
          </block>
        </view>
      </view>

      <text class="btn-service" wx:if="{{false}}" bindtap="showModalService">联系客服</text>

      <view class="{{'mod-btns ' + state.btnCol}}">
        <block wx:if="{{props.detail.status == 'ONSALE'}}">
          <view class="btn-buy-single" bindtap="handleClick" wx:if="{{state.btnBuySingleShow}}" data-type="NONE"><text data-type="NONE">￥{{state.priceCurrentBuyer}}</text>单独购买</view>
          <block wx:if="{{state.proType === 'TUAN' && state.promotionStatus === 'STAY'}}">
            <view class="btn-buy {{state.promotionStatus === 'INPROGRESS' && state.proType === 'TUAN' ? 'buy-tuan' : ''}}" bindtap="handleClick" data-type="NONE">
              <text data-type="NONE">￥{{state.priceCurrentTuan}}</text>
              {{state.btnText}}
            </view>
          </block>
          <block wx:else="">
            <view class="btn-buy {{state.promotionStatus === 'INPROGRESS' && state.proType === 'TUAN' ? 'buy-tuan' : ''}}" bindtap="handleClick" data-type="{{state.proType}}">
              <text data-type="{{state.proType}}">￥{{state.priceCurrentTuan}}</text>
              {{state.btnText}}
            </view>
          </block>
        </block>
        <block wx:if="{{props.detail.status != 'ONSALE' || props.detail.amount === 0}}">
          <view class="disabeld">商品已售完或已下架</view>
        </block>
      </view>

      <component key="skuPanel" name="sku-panel"/>
    </view>
  </button>
</form>
