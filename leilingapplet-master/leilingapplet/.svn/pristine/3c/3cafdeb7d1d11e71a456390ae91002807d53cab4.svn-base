<?php
namespace app\index\controller;
use app\index\model\User as UserModel;
use think\Controller;
use think\Session;
use think\Exception;
use think\Config;
use think\Request;
use think\DefaultRedis;
class Base extends controller{
	protected $beforeActionList = [
	// 'authenticationLogin' => ['except'=>'getAdvertisement'],
		'authenticationLogin' ,
	];
	public $redis;
	public $openid;
	public $userid;
	public $telephone;
	public function __construct(){
		$this->redis = new DefaultRedis(); 
		$this->openid = input('param.openid');
		if(!empty($this->openid)){
			$user = new UserModel;
			$userinfo = $user->where('openid',$this->openid)->find();
			$this->userid = $userinfo['id'];
			$this->telephone = $userinfo['telephone'];
		}
	}
	public function  authenticationLogin()
	{
		
		// if(empty($this->access_token)){
			//用户未登录
		// }
		// $access_token_redis_key = "access_token_" . $this->access_token;
		// if(!$this->redis->existsRedis($access_token_redis_key)){
			//用户登录过期了
		// }
		
		// $action = request()->action();
		// $noauthentication = config('noauthentication');
		
	}
}