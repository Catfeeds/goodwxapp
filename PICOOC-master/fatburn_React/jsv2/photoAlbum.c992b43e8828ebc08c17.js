webpackJsonp([7],{10:function(e,t,a){"use strict";var i=a(0),n=a(6),r=i.createClass({displayName:"Public_bigImg",render:function(){var e=this.props.bigImgArr,t=[],a=[];console.log(publicData.objImg);for(var r=0;r<e.length;r++)t.push(i.createElement("div",{className:"col-xs-12 col-sm-12 swiper-slide bigImg-li",key:r,"data-index":r,style:{backgroundImage:"url("+e[r].url+")"},onTouchStart:n.imgTouchStart.bind(this),onTouchMove:n.imgTouchMove.bind(this),onTouchEnd:n.imgTouchEnd.bind(this)}));if(e.length>1)for(var r=0;r<e.length;r++)a.push(i.createElement("span",{className:"swiper-pagination-bullet",key:r}));return i.createElement("div",{className:"row"},i.createElement("aside",{className:"row swiper-container swiper-container-bigImg bigImg"},i.createElement("div",{className:"row swiper-wrapper bigImg-main"},t),i.createElement("div",{className:"swiper-pagination swiper-pagination-bigImg swiper-pagination-report"},a)),i.createElement("div",{className:"saveImg-ceng",onTouchStart:n.saveImgCengTouchStart},i.createElement("aside",{className:"row saveImg"},i.createElement("div",{className:"col-xs-12 col-sm-12 saveImg-btn saveImg-item",onTouchStart:n.saveImgBtnTouchStart},"保存图片"),i.createElement("div",{className:"col-xs-12 col-sm-12 cancelImg-btn saveImg-item",onTouchStart:n.cancelImgBtnTouchStart},"取消"))))}});e.exports=r},230:function(e,t,a){"use strict";function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var n=a(0),r=a(2),s=a(3),o=a(1),c=a(10),l=a(6),m=["http://cdn2.picooc.com/web/res/fatburn/image/figureContrast/photo-front-w.png","http://cdn2.picooc.com/web/res/fatburn/image/figureContrast/photo-front-m.png"],p=["http://cdn2.picooc.com/web/res/fatburn/image/figureContrast/photo-side-w.png","http://cdn2.picooc.com/web/res/fatburn/image/figureContrast/photo-side-m.png"],g=getParamByUrl("campId"),d=getParamByUrl("roleId"),u={SCategory_SWoDeXiangCe:5060900,SWoDeXiangCe_ShanChuZhaoPian:5060901,SWoDeXiangCe_BianJiZhaoPian:5060902,SWoDeXiangCe_TiaoZhuanShangChuanZhaoPian:5060903,SWoDeXiangCe_TuPianYuLan:5060904},h={objImg:{}};window.publicData=h;var f=n.createClass({displayName:"MyPHoneAlbum",componentDidMount:function(){$(".partRight-img-li2").css("height",366*$(".partRight-img-li2").width()/275);for(var e=0;e<$(".partLeft-p1-span").length;e++)$(".partLeft-p1 .partLeft-p1-span").eq(e).width()>$(".partLeft-p2 .partLeft-p2-span").eq(e).width()?(console.log(e),$(".partLeft-p3 .partLeft-p3-span").width()>$(".partLeft-p1 .partLeft-p1-span").width()?$(".partLeft-p1").css("padding-left",($(".partLeft-p3 .partLeft-p3-span").width()-$(".partLeft-p1 .partLeft-p1-span").width())/2):$(".partLeft-p3").css("padding-left",($(".partLeft-p1 .partLeft-p1-span").width()-$(".partLeft-p3 .partLeft-p3-span").width())/2),$(".partLeft-p2").eq(e).css("padding-left",parseInt($(".partLeft-p1").eq(0).css("padding-left"))+($(".partLeft-p1 .partLeft-p1-span").eq(e).width()-$(".partLeft-p2 .partLeft-p2-span").eq(e).width())/2-1)):(console.log("a:"+e),$(".partLeft-p1 .partLeft-p1-span").eq(e).css("padding-left",($(".partLeft-p2 .partLeft-p2-span").eq(e).width()-$(".partLeft-p1 .partLeft-p1-span").eq(e).width())/2),$(".partLeft-p3 .partLeft-p3-span").eq(e).css("padding-left",($(".partLeft-p2 .partLeft-p2-span").eq(e).width()-$(".partLeft-p3 .partLeft-p3-span").eq(e).width())/2))},delImgClick:function(e){e.stopPropagation();var t=e.currentTarget;$(".fixbg").css("display","block"),$(".fixbg-main").css("margin-top",-$(".fixbg-main").height()/2),$(".deltime").html($(t).attr("data-datetime"));var a=$(t).attr("data-camppictureid"),i=$(t).attr("data-createtime"),n=$(t).attr("data-waistmeasureid"),r=$(t).attr("data-waistmeasure");"--"==r&&(r=0);var s={campPictureId:a,createTime:i,waistMeasureId:n,waistMeasure:r};o.publish("delImgParm",s),setMaiDian(u.SCategory_SWoDeXiangCe,u.SWoDeXiangCe_ShanChuZhaoPian)},editPhoneClick:function(e){e.stopPropagation();var t=e.currentTarget,a=$(t).attr("data-camppictureid");if("false"!=getParamByUrl("imgId")){var i=removeParamByUrl("imgId");window.location.href="editPhoto.html"+i+"&imgId="+a}else window.location.href="editPhoto.html"+window.location.search+"&imgId="+a;setMaiDian(u.SCategory_SWoDeXiangCe,u.SWoDeXiangCe_BianJiZhaoPian)},render:function(){var e,t=this.props.PhoneData,a=this.props.index;return n.createElement("aside",{className:"row page1 msgType1","data-pictureid":t[a].id,key:a},n.createElement("article",{className:"row list"},n.createElement("aside",{className:"row part "},n.createElement("div",{className:"col-xs-2 col-sm-2 partLeft2"},n.createElement("div",{className:"row"},n.createElement("div",{className:"col-xs-12 col-sm-12 partLeft-p1"},n.createElement("span",{className:"partLeft-p1-span"},"DAY")),n.createElement("div",{className:"col-xs-12 col-sm-12 partLeft-p2"},n.createElement("span",{className:"partLeft-p2-span"},t[a].day)),n.createElement("div",{className:"col-xs-12 col-sm-12 partLeft-p3"},n.createElement("span",{className:"partLeft-p3-span"},t[a].time)))),n.createElement("div",{className:"col-xs-12 col-sm-12 partRight",part:"2"},n.createElement("div",{className:"content"},n.createElement("span",{className:"",style:{width:"35%"}},"体重:",n.createElement("span",{className:"weight"},t[a].weight+"KG")),n.createElement("span",{className:"",style:{width:"30%"}},"脂肪:",n.createElement("span",{className:"fat"},t[a].fat+"%")),n.createElement("span",{className:"",style:{width:"35%"}},"腰围:",n.createElement("span",{className:"waistline"},t[a].waistMeasure+"CM"))),n.createElement("div",{className:"row "},n.createElement("div",{className:"col-xs-6 col-sm-6 partRight-img"},n.createElement("div",{className:"col-xs-12 col-sm-12 partRight-img-li partRight-img-li2 ",objimg:"img2",objimgindex:"0",style:{backgroundImage:"url("+t[a].frontPicture+"@500h_500w_1e)"},"data-obj_img":"frontPicture"+a,onClick:l.bindBigImg})),n.createElement("div",{className:"col-xs-6 col-sm-6 partRight-img"},n.createElement("div",{className:"col-xs-12 col-sm-12 partRight-img-li partRight-img-li2 ",objimg:"img2",objimgindex:"0",style:{backgroundImage:"url("+t[a].facePicture+"@500h_500w_1e)"},"data-obj_img":"facePicture"+a,onClick:l.bindBigImg})))))),n.createElement("div",{className:"manage"},n.createElement("a",(e={className:"edit","data-camppictureid":t[a].id,"data-day":t[a].day,"data-waistmeasure":t[a].waistMeasure,"data-fat":t[a].fat,"data-weight":t[a].weight,"data-facepicture":t[a].facePicture,"data-frontpicture":t[a].frontPicture,"data-datetime":t[a].time},i(e,"data-camppictureid",t[a].id),i(e,"onClick",this.editPhoneClick),e),n.createElement("span",null)),n.createElement("span",{className:"del","data-datetime":t[a].time,"data-camppictureid":t[a].id,"data-waistmeasureid":t[a].waistMeasureId,"data-createtime":t[a].createTime,"data-waistmeasure":t[a].waistMeasure,onClick:this.delImgClick},n.createElement("span",null))))}}),w=n.createClass({displayName:"PHoneAlbumBox",getInitialState:function(){function e(){$(".manage").show();appFc.controlRightInfo(function(){var e={iconType:1,id:"2",functionName:"getControl2",iconUrl:"",iconName:"完成",redDotType:"1",redDotShow:!1,redDotNum:"0",nativeType:"",content:"",str:"完成",color:"",opacity:""};return JSON.stringify(e)}())}function t(){$(".manage").hide();appFc.controlRightInfo(function(){var e={iconType:1,id:"2",functionName:"getControl1",iconUrl:"",iconName:"管理",redDotType:"1",redDotShow:!1,redDotNum:"0",nativeType:"",content:"",str:"管理",color:"",opacity:""};return JSON.stringify(e)}())}var a={title:"我的相册",color:"",opacity:"",backgroundColor:"",backgroundOpacity:""};a=JSON.stringify(a),appFc.controlTitle(a);var i=getCookie("loadtourl");if(i&&0==i){if("tanchao"!=getParamByUrl("testtype")){var n={iconType:0,iconColor:"",backNum:2,closeWebview:0,hidden:!1,isHandle:!1,functionName:""};n=JSON.stringify(n),appFc.controlLeft(n)}}else if("tanchao"!=getParamByUrl("testtype")){var n={iconType:0,iconColor:"",backNum:1,closeWebview:0,hidden:!1,isHandle:!1,functionName:""};n=JSON.stringify(n),appFc.controlLeft(n)}window.getControl2=t,window.getControl1=e;var r=function(){var e={iconType:1,rightStr:{str:"管理",color:"",opacity:"",id:"0",type:"0",functionName:"getControl1",redDotType:"1",redDotShow:!1,redDotNum:"0",nativeType:"",content:""},rightIcon:[]};return JSON.stringify(e)};return window.getPageInfo6=r(),appFc.controlRight(r()),{phoneData:[],bigImgArr:[],delImgParmData:{}}},componentWillMount:function(){var e=ajaxLink+"/v1/api/campStu/pictureList"+window.location.search+"&campId="+g+"&roleId="+d;this.serverRequest=$.get(e,function(e){if(200==e.code){if(0==e.resp.sex)var t=m[0],a=p[0];else var t=m[1],a=p[1];if(e.resp.data.length>0)for(var i=0;i<e.resp.data.length;i++)""!=e.resp.data[i].frontPicture&&null!=e.resp.data[i].frontPicture||(e.resp.data[i].frontPicture=t),""!=e.resp.data[i].facePicture&&null!=e.resp.data[i].facePicture||(e.resp.data[i].facePicture=a),null!=e.resp.data[i].weight&&""!=e.resp.data[i].weight||(e.resp.data[i].weight="--"),null!=e.resp.data[i].fat&&""!=e.resp.data[i].fat||(e.resp.data[i].fat="--"),null!=e.resp.data[i].waistMeasure&&""!=e.resp.data[i].waistMeasure||(e.resp.data[i].waistMeasure="--");this.setState({phoneData:e.resp.data})}}.bind(this))},componentWillUnmount:function(){this.serverRequest.abert()},componentDidMount:function(){o.subscribe("bigImgData",function(e,t){this.setState({bigImgArr:t})}.bind(this)),o.subscribe("delImgParm",function(e,t){this.setState({delImgParmData:t})}.bind(this)),$(".msg").css("margin-bottom",$(".upload-container").height()+30)},CancelClick:function(){$(".fixbg").css("display","none")},SureClick:function(){var e=this.state.delImgParmData,t=e.campPictureId,a=(e.createTime,e.waistMeasureId),i=(e.waistMeasure,$(".msgType1").length),n=ajaxLink+"/v1/api/campStu/deletePicture"+window.location.search+"&campPictureId="+t;$.ajax({type:"get",url:n,dataType:"json",success:function(e){if(200==e.code){if($("[data-pictureid="+t+"]").remove(),null!=a&&""!=a){var n=isMobile();"isApp"==n&&appFc.changeGirth(function(){var t={roleId:d,serverId:a,girthNum:0,time:e.resp.operateTrime};return JSON.stringify(t)}())}if(i--,alert("还有"+i+"张"),1==i||0==i)if(0==getCookie("toPhoto")){var r=function(){var e={iconType:0,backNum:2,closeWebview:0,iconUrl:""};return JSON.stringify(e)},n=isMobile();"isApp"==n&&appFc.controlLeft(r())}else{var r=function(){var e={iconType:0,backNum:1,closeWebview:0,iconUrl:""};return JSON.stringify(e)},n=isMobile();"isApp"==n&&appFc.controlLeft(r())}}else $(".error-main-t").html(e.result.message),$(".errorAlert").css("display","block"),$(".error-main").css("margin-top",-$(".fixbg-main").height()/2)}}),$(".fixbg").css("display","none")},uploadClick:function(e){var t=e.currentTarget;setCookie("uploadurl",1,1),$(t).attr("href","figureContrast.html"+window.location.search+"&campId="+g+"&roleId="+d+"&uploadurl=1"),setMaiDian(u.SCategory_SWoDeXiangCe,u.SWoDeXiangCe_TiaoZhuanShangChuanZhaoPian),e.stopPropagation()},render:function(){var e=this.state.phoneData,t=[];if(e.length>0)for(var a=0;a<e.length;a++)h.objImg["frontPicture"+a]=[],h.objImg["facePicture"+a]=[],h.objImg["frontPicture"+a].push({url:e[a].frontPicture}),h.objImg["facePicture"+a].push({url:e[a].facePicture}),t.push(n.createElement(f,{PhoneData:e,index:a,key:a}));var i;return i=""!=this.state.bigImgArr?n.createElement(c,{bigImgArr:this.state.bigImgArr}):n.createElement("i",null),n.createElement("div",null,n.createElement("section",{className:"container"},n.createElement("div",{className:"row test col-xs-12 col-sm-12"},n.createElement("div",{className:"bianji col-xs-6 col-sm-6"},"管理"),n.createElement("div",{className:"wancheng col-xs-6 col-sm-6"},"完成")),n.createElement("div",{className:"msg"},t),n.createElement("div",{className:"upload-container"},n.createElement("div",{className:"row upload"},n.createElement("a",{className:"row",onClick:this.uploadClick},"上传照片"))),i),n.createElement("div",{className:"row fixbg"},n.createElement("div",{className:"col-xs-12 col-sm-12 fixbg-main"},n.createElement("div",{className:"row"},n.createElement("div",{className:"col-xs-12 col-sm-12 fixbg-main-t"},"是否要删除",n.createElement("span",{className:"deltime"}),"的照片？"),n.createElement("div",{className:"col-xs-12 col-sm-12 fixbg-main-btn"},n.createElement("div",{className:"row"},n.createElement("div",{className:"col-xs-6 col-sm-6 fixbg-main-btn1",onClick:this.CancelClick},"取消"),n.createElement("div",{className:"col-xs-6 col-sm-6 fixbg-main-btn2",onClick:this.SureClick},"确定")))))),n.createElement(s,null),n.createElement("div",{className:"saveImg-ceng"},n.createElement("aside",{className:"row saveImg"},n.createElement("div",{className:"col-xs-12 col-sm-12 saveImg-btn saveImg-item",onClick:l.saveImgBtnTouchStart},"保存图片"),n.createElement("div",{className:"col-xs-12 col-sm-12 cancelImg-btn saveImg-item",onClick:l.cancelImgBtnTouchStart},"取消"))))}});r.render(n.createElement(w,null),document.getElementById("myPhoneAlbumBox"))},6:function(e,t,a){"use strict";function i(){if(w){w=!1;var e={display:!0};e=JSON.stringify(e),appFc.showTitle(e);appFc.showBackBtn(function(){var e={controlBtn:!1,function:""};return JSON.stringify(e)}());var t=setTimeout(function(){$("body").css("overflow","auto"),$("body").removeAttr("style"),$(".bigImg").css("display","none"),"block"==$(".page1").css("display")&&$(".setcard-img").css("display","block"),$(".saveImg-ceng").css("display","none"),document.addEventListener("touchmove",function(e){"hidden"==$("body").css("overflow")&&e.preventDefault()}),clearTimeout(r),clearTimeout(t),console.log(n);try{n.slideTo(0,1e3,!1),n.destroy(!0),console.log("mySwiper摧毁")}catch(t){var e=[];d.publish("bigImgData",e),console.log("mySwiper错误")}w=!0},200)}event.stopPropagation()}var n,r,s,o,c,l,m,p,g,d=a(1),u={},h=$(window).width(),f=$(window).height(),w=!0;window.commentDisplayBtn=!1,u.bindBigImg=function(e){if("block"==$(".comment2").css("display")||commentDisplayBtn)$("#comment-msg").blur(),commentDisplayBtn=!1;else{c=!0;var t=e.currentTarget.getAttribute("data-obj_img"),a=e.currentTarget.getAttribute("data-obj_img_index"),i=publicData.objImg[t];d.publish("bigImgData",i),"block"==$(".page1").css("display")&&$(".setcard-img").css("display","none"),$(".comment").css("display","none"),$("#comment-msg").blur(),$(".getImg-bg").css("height",$(".getImg-bg").width()),$(".bigImg-li").css("width",h),"android"==getParamByUrl("os")?$(".bigImg-li").css("height",f+70):$(".bigImg-li").css("height",f+64);var s={display:!1};s=JSON.stringify(s),appFc.showTitle(s);appFc.showBackBtn(function(){var e={controlBtn:!0,function:"closeBigImg"};return JSON.stringify(e)}()),r=setTimeout(function(){$("body").css("max-height",$(window).height()),$("body").css("overflow","hidden"),$(".swiper-container").css("width",$(window).width()),$(".swiper-wrapper").css("width",$(window).width()),$(".bigImg-li").css("width",$(window).width()),$(".bigImg").css("display","block"),document.addEventListener("touchmove",function(e){"hidden"==$("body").css("overflow")&&e.preventDefault()}),1==publicData.objImg[t].length?(n=new Swiper(".swiper-container-bigImg",{}),console.log(n)):(n=new Swiper(".swiper-container-bigImg",{pagination:".swiper-pagination-bigImg",spaceBetween:1,centeredSlides:!0,initialSlide:a}),console.log(n))},200)}},u.imgTouchStart=function(e){console.log(e),clearTimeout(o),o="",l=e.changedTouches[0].pageX,m=e.changedTouches[0].pageY;e.currentTarget.getAttribute("data-index");console.log(e.currentTarget.getAttribute("data-index")),s=$(e.currentTarget).css("background-image").split("(")[1].split(")")[0],console.log(s),console.log($(".bigImg").css("display")),console.log("setTimeout1"),o=setTimeout(function(){"block"==$(".bigImg").css("display")&&(console.log("setTimeout2"),$(".saveImg-ceng").css("height",$(window).height()),$(".saveImg-ceng").css("display","block"),c=!1),clearTimeout(o)},800),e.preventDefault()},u.imgTouchMove=function(e){if("block"==$(".saveImg-ceng").css("display"))clearTimeout(o),c=!1;else{p=e.changedTouches[0].pageX,g=e.changedTouches[0].pageY;var t,a;t=p-l,a=g-m,console.log(t+"|"+a),(t<-50||t>50||a<-50||a>50)&&(clearTimeout(o),c=!1)}e.preventDefault()},u.imgTouchEnd=function(e){p=e.changedTouches[0].pageX,g=e.changedTouches[0].pageY;var t,a;t=p-l,a=g-m,(t<-20||t>20||a<-20||a>20)&&(console.log("clearTimeout执行"),clearTimeout(o),c=!1),clearTimeout(o),console.log("timeBtn:"+c),console.log(o),c&&i(),c=!0,e.preventDefault()},u.saveImgBtnTouchStart=function(){event.stopPropagation(),event.preventDefault();isMobile();appFc.saveImg(function(){var e={url:s};return JSON.stringify(e)}()),$(".saveImg-ceng").css("display","none")},u.cancelImgBtnTouchStart=function(){event.stopPropagation(),event.preventDefault(),$(".saveImg-ceng").css("display","none")},u.saveImgCengTouchStart=function(){$(".saveImg-ceng").css("display","none"),event.stopPropagation(),event.preventDefault()},e.exports=u}},[230]);