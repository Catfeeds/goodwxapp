webpackJsonp([15],{248:function(e,t,a){"use strict";var r=a(0),n=a(1),s=a(3),o=r.createClass({displayName:"RankListContainer",getInitialState:function(){return this.getRankListFc(),{warningShow:!1,RankData:{}}},render:function(){var e=this,t=[],a=e.state.RankData,n="",s="",o="",i="",c=(getParamByUrl("roleId"),getParamByUrl("campId"));if(void 0!=a.resp&&a.resp.stuList.length>0){o=a.resp.stuList,n=a.resp.day;s="false"!=getParamByUrl("targetCampId")?a.resp.campName:"第"+a.resp.week+"周减脂排名",e.clientControlFun(a.resp.roleName)}if(void 0!==e.state.RankData.resp){var l=a.resp.stuList.length,m=[],p=[],d=r.createElement("div",{className:"warningBox",style:{display:1==e.state.warningShow?"block":"none"},key:999},r.createElement("span",{className:"leftBorder"}),r.createElement("p",{className:"tips"},"打卡次数为今日早餐、午餐、晚餐和运动打卡数总和，同类标签多次打卡不重复计算。"),r.createElement("span",{className:"notShow",onClick:e.notShowFun},"不再提示"));t.push(d);for(var u=0;u<l;u++){if(u<3){var g="userRank userRank"+(u+1);m=r.createElement("span",{className:g,key:u},u+1);var h="";h=0==u?"http://cdn2.picooc.com/web/res/fatburn/image/rankList/jin.png":1==u?"http://cdn2.picooc.com/web/res/fatburn/image/rankList/yin.png":"http://cdn2.picooc.com/web/res/fatburn/image/rankList/tong.png",p=r.createElement("img",{className:"rankIcon",src:h,key:u+3})}else{var g="userRank userRank"+(u+1);m=r.createElement("span",{className:g,key:u},u+1),p=[]}i="studentOtherInfo.html"+window.location.search+"&targetRoleId="+o[u].roleId+"&targetCampId="+c,i=roleId==o[u].roleId?"studentStudentInfo.html"+window.location.search+"&targetRoleId="+o[u].roleId+"&targetCampId="+c:"studentOtherInfo.html"+window.location.search+"&targetRoleId="+o[u].roleId+"&targetCampId="+c,t.push(r.createElement("div",{className:"row rankItem",key:u,"data-index":u,onClick:e.getNewWebView,"data-info-url":i},r.createElement("div",{className:"rankLeft col-xs-6 col-sm-6"},r.createElement("img",{className:"userHeader",src:a.resp.stuList[u].url,onError:imgError.bind(this,a.resp.stuList[u].sex)}),r.createElement("span",{className:"userName"},a.resp.stuList[u].name),p,r.createElement("img",{className:"userSex",style:{display:"none"},src:0==a.resp.stuList[u].sex?"http://cdn2.picooc.com/web/res/fatburn/image/rankList/girl.png":"http://cdn2.picooc.com/web/res/fatburn/image/rankList/boy.png"}),m),r.createElement("div",{className:"rankRight col-xs-6 col-sm-6"},r.createElement("div",{className:"row"},r.createElement("div",{className:"col-xs-6 col-sm-6 checkNumBox"},r.createElement("div",{className:"paramName"},"打卡次数"),r.createElement("div",null,r.createElement("span",{className:"fatNum"},a.resp.stuList[u].checkNum),"次")),r.createElement("div",{className:"col-xs-6 col-sm-6"},r.createElement("div",{className:"paramName"},"平均分数"),r.createElement("div",null,r.createElement("span",{className:"fatNum"},a.resp.stuList[u].average),"分"))))))}}return r.createElement("div",{className:"container"},r.createElement("div",{className:"row rankTitle",style:{display:"none"}},r.createElement("div",null,r.createElement("img",{src:"http://cdn2.picooc.com/web/res/fatburn/image/rankList/start.png"}),r.createElement("span",{className:"title"},s),r.createElement("img",{src:"http://cdn2.picooc.com/web/res/fatburn/image/rankList/start.png"})),r.createElement("div",{className:"rankTime"},"更新时间: ",n)),r.createElement("div",{className:"row rankList"},t))},getRankListFc:function(){var e=this,t=(getParamByUrl("roleId"),getParamByUrl("campId"),window.location.protocol+"//"+window.location.host),a=t+"/v1/api/campCommon/dailyCampList"+window.location.search;$.ajax({type:"get",url:a,dataType:"json",success:function(t){console.log(t),200==t.code?(void 0!==e.state.RankData.resp&&e.state.RankData.resp.stuList.length>0&&(t.resp.stuList=e.state.RankData.resp.stuList.concat(t.resp.stuList)),e.setState({RankData:t}),1!=getCookie("rankListTodayTip")&&e.setState({warningShow:!0})):($(".error-main-t").html("服务器开小差了～"),$(".errorAlert").css("display","block"),$(".error-main").css("margin-top",-$(".error-main").height()/2))}})},notShowFun:function(){var e=this;setCookie("rankListTodayTip",1,365),e.setState({warningShow:!1})},getNewWebView:function(e){var t=absoluteUrl+e.currentTarget.getAttribute("data-info-url");console.info(t);var a=function(){var e={link:t,animation:1};return JSON.stringify(e)};"isApp"==isMobile()&&"tanchao"!=getParamByUrl("testtype")?getParamByUrl("webver")>2?appFc.openWebview(a()):mobileApp.openWebview(a()):window.location.href=t},clientControlFun:function(e){if(getParamByUrl("webver")>2){appFc.controlLeft(function(){var e={iconType:0,iconColor:"",backNum:1,closeWebview:0,hidden:!1,isHandle:!1,functionName:""};return JSON.stringify(e)}())}else{"isApp"==n&&"undefined"!=typeof mobileApp&&mobileApp.showLeftBtn(function(){var e={iconType:0,backNum:1,closeWebview:0,iconUrl:"",hidden:!1,isHandle:!1,functionName:""};return JSON.stringify(e)}()),document.documentElement.style.webkitTouchCallout="none"}if(getParamByUrl("webver")>2){var t={title:"今日打卡排名",color:"",opacity:"",backgroundColor:"",backgroundOpacity:""};t=JSON.stringify(t),appFc.controlTitle(t);var a="",r=["https://cdn2.picooc.com/web/res/event/chrome/android_share.png","https://cdn2.picooc.com/web/res/event/chrome/ios_share.png"];a="android"==getParamByUrl("os")?r[0]:r[1];appFc.controlRight(function(){var t={iconType:0,rightStr:{str:"",color:"",opacity:"",id:"0"},rightIcon:[{type:"1",id:"1",functionName:"",iconUrl:a,iconName:"分享",redDotType:"1",redDotShow:!1,redDotNum:"0",nativeType:"0",content:{shareTitle:"有品·燃脂营",shareUrl:"",shareIcon:"",shareDesc:"#有品燃脂营，随时减脂有效塑形#@有品PICOOC",shareTag:"",shareType:1,shareBackgroundColor:"#eeeff3",shareTypeDesc:"有品燃脂营 · 打卡排名",fatBurnName:e}}]};return JSON.stringify(t)}())}else{var n=isMobile();"isApp"==n&&"undefined"!=typeof mobileApp&&mobileApp.getShareInfo(function(){var e={title:"今日打卡排名",backgroundColor:"#eeeff3",isShare:!0,shareTitle:"有品·燃脂营",shareUrl:"",shareIcon:"",shareDesc:"#有品燃脂营，随时减脂有效塑形#@有品PICOOC",shareType:1,shareTypeDesc:"",color:"",opacity:"",backgroundOpacity:""};return JSON.stringify(e)}()),document.documentElement.style.webkitTouchCallout="none"}}}),i=r.createClass({displayName:"Component",render:function(){return r.createElement("div",null,r.createElement(o,null),r.createElement(s,null))}});n.render(r.createElement(i,null),document.getElementById("main"))}},[248]);