webpackJsonp([32],{210:function(e,t,n){"use strict";var i=n(0),a=n(2),o=n(3),l={textNumLegal:!0,textError:!0,itemName:decodeURIComponent(decodeURIComponent(getParamByUrl("itemName"))),itemIndex:getParamByUrl("index"),itemValue:decodeURIComponent(getParamByUrl("itemValue")),theDevice:getParamByUrl("os"),errorText:"",hasUpdate:!1},r={SCategory_SXiuGaiGeRenXinXi:5060500,SXiuGaiGeRenXinXi_ShuRuKuangYi:5060501,SXiuGaiGeRenXinXi_ShuRuKuangEr:5060502,SXiuGaiGeRenXinXi_QingKongNeiRong:5060503,SXiuGaiGeRenXinXi_FangQiBaoCun:5060504,SXiuGaiGeRenXinXi_QueRenBaoCun:5060505,SXiuGaiGeRenXinXi_DianjiBaoCun:5060506},c=i.createClass({displayName:"EditInfo",getInitialState:function(){var e=this;window.getMessage=e.getMessage,e.leftControl(!0,!1);var t="修改"+l.itemName,n={title:t,color:"",opacity:"",backgroundColor:"",backgroundOpacity:""};return n=JSON.stringify(n),appFc.controlTitle(n),{}},componentDidMount:function(){var e=this;$(".editValue").bind("input propertychange",function(){var t=$(this).val(),n=0,i=(t.length,e.getByteLen(l.itemValue));n=e.getByteLen(t),console.info(n),16<n?(l.textNumLegal=!1,console.info(l.textNumLegal),i<n&&(l.errorText="不能超过16个字符哦~",$(".fixbg1").text(l.errorText),$(".fixbg1").css("display","block"),setTimeout(function(){$(".fixbg1").css("display","none")},2e3))):l.textNumLegal=!0,t.indexOf(",")>=0||t.indexOf("，")>=0?(l.textError=!1,l.errorText="昵称不能有逗号哦~",$(".fixbg1").text(l.errorText),$(".fixbg1").css("display","block"),setTimeout(function(){$(".fixbg1").css("display","none")},1e3)):l.textError=!0,console.info(l.textNumLegal),i=n,l.hasUpdate=!1})},getByteLen:function(e){for(var t=0,n=0;n<e.length;n++){null!=e.charAt(n).match(/[^\x00-\xff]/gi)?t+=2:t+=1}return t},deleteContent:function(){setMaiDian(r.SCategory_SXiuGaiGeRenXinXi,r.SXiuGaiGeRenXinXi_QingKongNeiRong),$(".editValue").val(""),l.textNumLegal=!0},changeInfo:function(){var e=this;setMaiDian(r.SCategory_SXiuGaiGeRenXinXi,r.SXiuGaiGeRenXinXi_DianjiBaoCun);var t=$(".editValue").val();t!=l.itemValue&&l.textNumLegal&&l.textError&&(0==l.itemIndex?(t=t.replace(/ /g,""),null==t||""==t?(l.errorText="昵称不能为空哦~",$(".fixbg1").text(l.errorText),$(".fixbg1").css("display","block"),setTimeout(function(){$(".fixbg1").css("display","none")},2e3)):e.updateInfo(l.itemIndex,t)):e.updateInfo(l.itemIndex,t))},updateInfo:function(e,t){var n=this,i="";0==e?i="name":1==e?i="career":2==e&&(i="area");var a=window.location.protocol+"//"+window.location.host,o=a+"/v1/api/campStu/updateStudentInfo"+window.location.search+"&"+i+"="+t;console.info(o),$.ajax({type:"get",url:o,dataType:"json",success:function(e){200==e.code?(l.hasUpdate=!0,n.leftControl(!1,!1),n.closePage()):($(".error-main-t").html(e.message),$(".errorAlert").css("display","block"),$(".error-main").css("margin-top",-$(".error-main").height()/2))}})},closePage:function(){appFc.deleteHistory(function(){var e={backNum:1,closeWebview:0};return JSON.stringify(e)}()),document.documentElement.style.webkitTouchCallout="none"},leftControl:function(e,t){appFc.controlLeft(function(){var n={iconType:0,iconColor:"",backNum:1,closeWebview:0,hidden:t,isHandle:e,functionName:"getMessage"};return JSON.stringify(n)}())},getMessage:function(){var e=this;"android"==l.theDevice?$(".editValue").blur():e.inputBlur();var t=$(".editValue").val().length>0,n=$(".editValue").val()!=l.itemValue;t&&n&&l.textNumLegal?(e.leftControl(!1,!0),$(".fixbg").css("display","block"),$(".fixbg-main-btn1").click(function(){setMaiDian(r.SCategory_SXiuGaiGeRenXinXi,r.SXiuGaiGeRenXinXi_FangQiBaoCun),$(".fixbg").css("display","none"),e.leftControl(!1,!1),e.closePage()}),$(".fixbg-main-btn2").click(function(){setMaiDian(r.SCategory_SXiuGaiGeRenXinXi,r.SXiuGaiGeRenXinXi_QueRenBaoCun),$(".fixbg").css("display","none"),$(".editBtn").click()})):(e.leftControl(!1,!1),e.closePage())},inputBlur:function(){$(".editValue").blur()},render:function(){return i.createElement("div",{className:"container"},i.createElement("div",{className:"row content"},i.createElement("div",{className:"col-xs-11 col-sm-11"},i.createElement("input",{type:"text",className:"editValue",defaultValue:l.itemValue}),i.createElement("input",{type:"text",onClick:this.inputBlur,style:{display:"none"}})),i.createElement("div",{className:"col-xs-1 col-sm-1",onClick:this.deleteContent},i.createElement("img",{src:"image/studentInfo/delete.png"}))),i.createElement("div",{className:"editBtn",onClick:this.changeInfo},"保存"))}}),s=i.createClass({displayName:"SaveInfo",render:function(){return i.createElement("aside",{className:"row fixbg"},i.createElement("div",{className:"col-xs-12 col-sm-12 fixbg-main"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-xs-12 col-sm-12 fixbg-main-t"},"您输入的信息还没有保存，现在要保存吗？"),i.createElement("div",{className:"col-xs-12 col-sm-12 fixbg-main-btn"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-xs-6 col-sm-6 fixbg-main-btn1"},"放弃"),i.createElement("div",{className:"col-xs-6 col-sm-6 fixbg-main-btn2"},"保存"))))))}}),u=i.createClass({displayName:"ErrorInfo",render:function(){return i.createElement("aside",{className:"fixbg1"})}}),m=i.createClass({displayName:"Component",render:function(){return i.createElement("div",null,i.createElement(c,null),i.createElement(u,null),i.createElement(s,null),i.createElement(o,null))}});a.render(i.createElement(m,null),document.getElementById("editInfoMain"))}},[210]);