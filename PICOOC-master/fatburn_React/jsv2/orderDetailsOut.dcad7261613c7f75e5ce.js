webpackJsonp([26],{225:function(e,a,n){"use strict";var i=n(0),t=n(1),o=n(3),s={SCategory_SDingDanXiangQing:5080500,SDingDanXiangQing_ShiFouQuXiaoDingDan:5080501,SDingDanXiangQing_QuXiaoDingDan:5080502,SDingDanXiangQing_ZanBuQuXiao:5080503,SDingDanXiangQing_LianXiKeFu:5080504,SDingDanXiangQing_QuXiaoLianXiKeFu:5080505,SDingDanXiangQing_QianWangWeiXin:5080506,SDingDanXiangQing_QianWangShangPinXiangQing:5080507,SDingDanXiangQing_QuZhiFu:5080508},c={outAppLogin:0!=getCookie("appOutPhone")};window.publicData=c;var r=navigator.userAgent,l=!!r.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),m="",g=[i.createElement("span",{className:"wait"},"等待付款"),i.createElement("span",{className:"nowait"},"已完成"),i.createElement("span",{className:"nowait"},"已取消"),i.createElement("span",{className:"nowait"},"已关闭"),i.createElement("span",{className:"nowait"},"退款中"),i.createElement("span",{className:"nowait"},"退款完成")],d=i.createClass({displayName:"OrderDetailsContainer",getInitialState:function(){var e=this;return window.getOrderInfo=e.getOrderInfo,e.getOrderInfo(),{orderDetailsData:{}}},componentWillMount:function(){0==c.outAppLogin&&(window.location.href="productDetails.html?linkId="+getParamByUrl("linkId"))},componentDidMount:function(){},render:function(){var e,a=this,n=a.state.orderDetailsData,t="none",o="none";if(console.log(n),void 0!==n.resp){t="block";var s=n.resp.beginTime,c=s.split("-"),r=c[0]+"年"+c[1]+"月"+c[2]+"日",m="¥"+n.resp.currentPrice;0==n.resp.orderType&&(o="block",a.timeDiffer(n.resp.nowDate,n.resp.endTime));var d="";"block",d=n.resp.weChat,n.resp.weChat&&null!=n.resp.weChat&&""!=n.resp.weChat&&("block",d=n.resp.weChat,d.length>20&&(d=d.substring(0,12)+"...")),e=i.createElement("div",null,i.createElement("section",{className:"container",style:{display:t}},i.createElement("div",{className:"row noAppTitle",style:{display:"none"}},i.createElement("div",{className:"col-xs-4 col-sm-4 left",onClick:a.leftFunction},"关闭"),i.createElement("div",{className:"col-xs-4 col-sm-4 middle"},i.createElement("img",{src:"https://cdn2.picooc.com/web/res/fatburn/image/sell/productDetails/logoLeft.png"})),i.createElement("div",{className:"col-xs-4 col-sm-4"})),i.createElement("aside",{className:"row order common"},i.createElement("div",{className:"row col-xs-12 col-sm-12 orderDetail"},i.createElement("div",{className:"col-xs-8 col-sm-8 left"},"订单编号：",i.createElement("span",{id:"orderId"},n.resp.orderId)),i.createElement("div",{className:"col-xs-4 col-sm-4 right",id:"orderStatus"},g[n.resp.orderType])),i.createElement("div",{className:"row col-xs-12 col-sm-12 info",onClick:a.infoFunction},i.createElement("div",{className:"col-xs-3 col-sm-3 infoImg"},i.createElement("img",{id:"orderImg",src:n.resp.goodsUrl})),i.createElement("div",{className:"col-xs-9 col-sm-9 infoDesc"},i.createElement("h3",{id:"orderName"},n.resp.goodsName),i.createElement("div",{className:"infoDesc_bottom"},i.createElement("p",{className:"campBegin"},"开营时间：",i.createElement("span",{id:"beginTime"},r)),i.createElement("p",{className:"price",id:"price"},"¥",i.createElement("span",{id:"totalPrice"},n.resp.origPrice)))))),i.createElement("aside",{className:"row common content content1",style:{height:"auto"}},i.createElement("div",{className:"borderTop jiHuo content1-padding",style:{display:1==n.resp.orderType&&null!=n.resp.activationCode?"block":"none"}},i.createElement("div",{className:"col-xs-7 col-sm-7 left",style:{display:1==l?"none":"block"}},"激活码：",i.createElement("input",{className:"activationCode readonly",ref:"activationCode",id:"needCode",value:n.resp.activationCode,type:"text",readOnly:!0,unselectable:"on"})),i.createElement("div",{className:"col-xs-7 col-sm-7 left",style:{display:1==l?"block":"none"}},"激活码：",i.createElement("span",{className:"activationCode2"},n.resp.activationCode)),i.createElement("div",{style:{display:1==l?"none":"block"},className:"col-xs-5 col-sm-5 right",id:"copy"},i.createElement("span",{className:"copyText","data-clipboard-target":"#needCode","data-clipboard-action":"copy"},"复制")),i.createElement("div",{style:{display:1==l?"block":"none"},className:"col-xs-5 col-sm-5 right",id:"copy"},i.createElement("span",{className:"copyText",style:{border:"none"}},"可长按复制"))),i.createElement("div",{className:"row col-xs-12 col-sm-12 content1-padding"},i.createElement("div",{className:"col-xs-5 col-sm-5 left"},"手机号"),i.createElement("div",{className:"col-xs-7 col-sm-7 right",id:"phoneNum"},n.resp.phoneNo))),i.createElement("aside",{className:"row common content content2"},i.createElement("div",{className:"row col-xs-12 col-sm-12"},i.createElement("div",{className:"col-xs-5 col-sm-5 left"},"支付方式"),i.createElement("div",{className:"col-xs-7 col-sm-7 right"},"微信支付"))),i.createElement("aside",{className:"row common content content3"},i.createElement("div",{className:"row col-xs-12 col-sm-12"},i.createElement("div",{className:"col-xs-5 col-sm-5 left"},"商品总额"),i.createElement("div",{className:"col-xs-7 col-sm-7 right right2"},"¥",i.createElement("span",{id:"origPrice"},n.resp.origPrice)),i.createElement("div",{className:"col-xs-5 col-sm-5 left"},"优惠券"),i.createElement("div",{className:"col-xs-7 col-sm-7 right right2"},"-¥",i.createElement("span",{id:"couponPrice"},n.resp.couponPrice)),i.createElement("div",{className:"col-xs-6 col-sm-6 left"}),i.createElement("div",{className:"col-xs-6 col-sm-6 right right2 right3"},i.createElement("span",null,"实付款"),i.createElement("span",{id:"currentPrice",style:{marginLeft:"1rem"}},m)))),i.createElement("aside",{style:{display:0==l?"block":"none"},className:"row common content content4 service",id:"copyService","data-clipboard-action":"copy","data-clipboard-target":"#picooc"},i.createElement("div",{className:"row col-xs-12 col-sm-12 contact"},i.createElement("img",{src:"https://cdn2.picooc.com/web/res/fatburn/image/sell/orderDetailsOut/server.png"})," ",i.createElement("span",null,"联系客服")),i.createElement("input",{ref:"picooc",id:"picooc",value:"picooc2",type:"text",readOnly:!0,style:{position:"absolute",opacity:"0",left:"0",zIndex:"-9"}})),i.createElement("aside",{style:{display:1==l?"block":"none"},className:"row common content content4 service",onClick:a.iOsServiceFunction},i.createElement("div",{className:"row col-xs-12 col-sm-12 contact"},i.createElement("img",{src:"https://cdn2.picooc.com/web/res/fatburn/image/sell/orderDetailsOut/server.png"})," ",i.createElement("span",null,"联系客服"))),i.createElement("aside",{className:"row common content status",style:{display:o}},i.createElement("div",{className:"row col-xs-12 col-sm-12"},i.createElement("div",{className:"row col-xs-6 col-sm-6 left"},i.createElement("div",{className:"col-xs-12 col-sm-12 time"},"待付款剩余时间"),i.createElement("div",{className:"col-xs-12 col-sm-12 timeNum"},i.createElement("span",{id:"hour"}),i.createElement("span",{id:"minute"}),i.createElement("span",{id:"second"}))),i.createElement("div",{className:"col-xs-6 col-sm-6 right"},i.createElement("span",{className:"cancel",onClick:a.cancelOrderFunction,"data-order_id":n.resp.orderId,"data-goods_id":n.resp.goodsId},"取消订单"),i.createElement("span",{onClick:a.goToPayFunction,className:"gotoPay","data-order":JSON.stringify(n.resp),"data-order_id":n.resp.orderId,style:{marginLeft:"1rem"}},"去支付")))),i.createElement("aside",{className:"alertBox",style:{display:"none"}},i.createElement("div",{className:"alerts"},"复制成功"))),i.createElement("aside",{className:"row fixbg"},i.createElement("div",{className:"col-xs-12 col-sm-12 fixbg-main"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-xs-12 col-sm-12 fixbg-main-t"}),i.createElement("div",{className:"col-xs-12 col-sm-12 fixbg-main-btn"},i.createElement("div",{className:"row row1"},i.createElement("div",{className:"col-xs-12 col-sm-12 fixbg-main-btn1"})),i.createElement("div",{className:"row row2",style:{display:"none"}},i.createElement("div",{className:"col-xs-6 col-sm-6 fixbg-main-btn1"}),i.createElement("div",{className:"col-xs-6 col-sm-6 fixbg-main-btn2"})))))),i.createElement("aside",{className:"row fixBg"},i.createElement("div",{className:"col-xs-12 col-sm-12 fixBg-main"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-xs-12 col-sm-12 fixBg-top"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-xs-12 col-sm-12 fixBg-p"})))))))}else e=i.createElement("i",null);return e},getOrderInfo:function(){var e=this,a=ajaxLink+"/v1/api/campOrder/orderInfo"+window.location.search;$.ajax({type:"get",url:a,dataType:"json",success:function(n){if(200==n.code){console.log(n),console.log(a),void 0!==e.state.orderDetailsData.resp&&e.state.orderDetailsData.resp.records.length>0&&(n.resp.records=e.state.orderDetailsData.resp.records.concat(n.resp.records)),e.setState({orderDetailsData:n});var i=new Clipboard(".copyText"),t=new Clipboard("#copyService");i.on("success",function(e){console.log(e),$(".alertBox").stop(!0).fadeIn(200).delay(2e3).fadeOut(200)}),i.on("error",function(e){console.log(e)}),t.on("success",function(e){console.log(e),$(".fixbg-main-t").html('已复制燃脂营售后客服微信号<span style="color:#35d0c5;">picooc2</span>，请前往微信，在顶部搜索中粘贴'),$(".fixbg-main-t").css("text-align","left"),$(".fixbg-main-btn1").html("我知道了"),$(".fixbg-main-btn2").html("前往微信"),$(".fixbg").css("display","block"),$(".fixbg-main").css("margin-top",-$(".fixbg-main").height()/2),$(".fixbg-main").css("width","90%"),$(".fixbg-main").css("left","5%"),$(".fixbg-main-btn1").unbind("click").click(function(){setMaiDian(s.SCategory_SDingDanXiangQing,s.SDingDanXiangQing_QuXiaoLianXiKeFu),$(".fixbg").css("display","none")})}),t.on("error",function(e){console.log(e)})}else $(".error-main-t").html(n.result.message),$(".errorAlert").css("display","block"),$(".error-main").css("margin-top",-$(".error-main").height()/2)},error:function(){$(".error-main-t").html(data.message),$(".errorAlert").css("display","block"),$(".error-main").css("margin-top",-$(".error-main").height()/2)}})},iOsServiceFunction:function(){$(".fixbg-main-t").html('如有疑问，请添加燃脂营售后客服微信哦~（微信号：<span style="color:#35d0c5;">picooc2</span>）'),$(".fixbg-main-t").css("text-align","left"),$(".fixbg-main-btn1").html("我知道了"),$(".fixbg-main-btn2").html("前往微信"),$(".fixbg").css("display","block"),$(".fixbg-main").css("margin-top",-$(".fixbg-main").height()/2),$(".fixbg-main").css("width","90%"),$(".fixbg-main").css("left","5%"),$(".fixbg-main-btn1").unbind("click").click(function(){setMaiDian(s.SCategory_SDingDanXiangQing,s.SDingDanXiangQing_QuXiaoLianXiKeFu),$(".fixbg").css("display","none")})},infoFunction:function(){var e=this,a=e.state.orderDetailsData;setMaiDian(s.SCategory_SDingDanXiangQing,s.SDingDanXiangQing_QianWangShangPinXiangQing);var n=a.resp.linkId;null!=n&&(window.location.href="productDetails.html?refer=4&linkId="+n)},serviceFunction:function(){setMaiDian(s.SCategory_SDingDanXiangQing,s.SDingDanXiangQing_LianXiKeFu);var e=this;console.log("me",e),e.refs.picooc.select(),console.log(e.refs.picooc),document.execCommand("Copy"),$(".fixbg-main-t").html('已复制燃脂营售后客服微信号<span style="color:#35d0c5;">picooc2</span>，请前往微信，在顶部搜索中粘贴'),$(".fixbg-main-t").css("text-align","left"),$(".fixbg-main-btn1").html("我知道了"),$(".fixbg-main-btn2").html("前往微信"),$(".fixbg").css("display","block"),$(".fixbg-main").css("margin-top",-$(".fixbg-main").height()/2),$(".fixbg-main").css("width","90%"),$(".fixbg-main").css("left","5%"),$(".fixbg-main-btn1").unbind("click").click(function(){setMaiDian(s.SCategory_SDingDanXiangQing,s.SDingDanXiangQing_QuXiaoLianXiKeFu),$(".fixbg").css("display","none")})},cancelOrderFunction:function(){var e=this;setMaiDian(s.SCategory_SDingDanXiangQing,s.SDingDanXiangQing_ShiFouQuXiaoDingDan),m=$(".cancel").attr("data-goods_id"),$(".fixbg-main-t").html("确认取消订单？"),$(".fixbg-main-t").css("text-align","center"),$(".fixbg-main-btn1").html("取消订单"),$(".fixbg-main-btn2").html("暂不取消"),$(".fixbg .row1").css("display","none"),$(".fixbg .row2").css("display","block"),$(".fixbg").css("display","block"),$(".fixbg-main").css("margin-top",-$(".fixbg-main").height()/2),$(".fixbg-main").css("width","84%"),$(".fixbg-main").css("left","8%"),$(".fixbg-main-btn2").unbind("click").click(function(){$(".fixbg .row1").css("display","block"),$(".fixbg .row2").css("display","none"),setMaiDian(s.SCategory_SDingDanXiangQing,s.SDingDanXiangQing_ZanBuQuXiao),$(".fixbg").css("display","none")}),$(".fixbg-main-btn1").unbind("click").click(function(){$(".fixbg .row1").css("display","block"),$(".fixbg .row2").css("display","none"),setMaiDian(s.SCategory_SDingDanXiangQing,s.SDingDanXiangQing_QuXiaoDingDan),e.cancelOrder(2)})},goToPayFunction:function(e){var a=this;a.state.orderDetailsData;setMaiDian(s.SCategory_SDingDanXiangQing,s.SDingDanXiangQing_QuZhiFu),setCookiePath("toOrderSuccess","2",1,"/;domain=picooc.com");var n=JSON.parse(e.currentTarget.getAttribute("data-order")),i={goodsId:n.goodsId,orderId:n.orderId,userId:0,phoneNo:n.phoneNo,origPrice:n.originPrice,currentPrice:n.currentPrice,couponPrice:n.couponPrice,isCoupon:n.isCoupon,couponId:n.couponId,orderUrl:n.orderUrl,sourceType:n.sourceType,trafficSource:n.trafficSource,isOwnPicooc:n.isOwnPicooc};localStorage.setItem("goodsInfos",JSON.stringify(i));e.currentTarget.getAttribute("data-order_id"),e.currentTarget.getAttribute("data-price");if("micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i))if("微信"==i.sourceType){removeParamByUrl("phoneNo");for(var t=window.location.search.substring(1),o=t.split("&"),c="?",r=0;r<o.length;r++){var l=o[r].split("=");"phoneNo"!=l[0]&&(c+="&"+l[0]+"="+l[1])}window.location.href="payment.html"+c+"&phoneNo="+i.phoneNo+"&fromGo=1"}else"燃脂营APP"==i.sourceType||"有赞"==i.sourceType?($(".error-main-t").html("该订单在有品app上生成哒，请在同一个渠道完成支付~"),$(".errorAlert").css("display","block"),$(".error-main").css("margin-top",-$(".fixbg-main").height()/2)):"微博"==i.sourceType?($(".error-main-t").html("该订单在微博上生成哒，请在同一个渠道完成支付~"),$(".errorAlert").css("display","block"),$(".error-main").css("margin-top",-$(".fixbg-main").height()/2)):"QQ"==i.sourceType?($(".error-main-t").html("该订单在qq上生成哒，请在同一个渠道完成支付~"),$(".errorAlert").css("display","block"),$(".error-main").css("margin-top",-$(".fixbg-main").height()/2)):"浏览器"==i.sourceType&&($(".error-main-t").html("该订单在浏览器上生成哒，请在同一个渠道完成支付~"),$(".errorAlert").css("display","block"),$(".error-main").css("margin-top",-$(".fixbg-main").height()/2));else if("微信"==i.sourceType)$(".error-main-t").html("该订单在微信上生成哒，请在同一个渠道完成支付~"),$(".errorAlert").css("display","block"),$(".error-main").css("margin-top",-$(".fixbg-main").height()/2);else if("燃脂营APP"==i.sourceType||"有赞"==i.sourceType)$(".error-main-t").html("该订单在有品app上生成哒，请在同一个渠道完成支付~"),$(".errorAlert").css("display","block"),$(".error-main").css("margin-top",-$(".fixbg-main").height()/2);else{removeParamByUrl("phoneNo");for(var t=window.location.search.substring(1),o=t.split("&"),c="?",r=0;r<o.length;r++){var l=o[r].split("=");"phoneNo"!=l[0]&&(c+="&"+l[0]+"="+l[1])}window.location.href="payment.html"+c+"&phoneNo="+i.phoneNo+"&orderUrl="+i.orderUrl+"&fromGo=1"}e.stopPropagation()},timeDiffer:function(e,a){var n=this;("iOS"==getParamByUrl("os")||r.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/))&&(a=a.replace(/-/g,"/"),e=e.replace(/-/g,"/"));var i=new Date(a)-new Date(e);i=parseInt(i/1e3),console.log("intDiff",i);var t=setInterval(function(){if(i>=0){var e=Math.floor(i/86400),a=Math.floor(i/3600)-24*e,o=Math.floor(i/60)-24*e*60-60*a,s=Math.floor(i)-24*e*60*60-60*a*60-60*o;a=(a<10?"0":"")+a,o=(o<10?"0":"")+o,s=(s<10?"0":"")+s,$("#hour").html(a+":"),$("#minute").html(o+":"),$("#second").html(s),i--}else i<0&&(console.log(i),clearInterval(t),n.cancelOrder(3))},1e3)},cancelOrder:function(e){console.log(m);var a=ajaxLink+"/v1/api/campOrder/updateOrder"+window.location.search+"&goodsId="+m+"&orderType="+e;$.ajax({type:"get",url:a,dataType:"json",success:function(n){console.log(a),200==n.code?2==e?($(".fixbg").css("display","none"),$(".status").css("display","none"),$(".wait").html("已取消"),$(".wait").css("color","#adadad"),$(".fixBg").css("display","block"),$(".fixBg-p").css("display","block"),$(".fixBg-p").html("订单已取消"),$(".fixBg").css("height",$(window).height()),$(".fixBg-main").css("width",$(window).width()-140),$(".fixBg-main").css("margin-top",-$(".fixBg-main").height()/2),setTimeout(function(){$(".fixBg").css("display","none"),$(".fixBg-p").css("display","none")},1500)):3==e&&($(".status").css("display","none"),$(".wait").html("已关闭"),$(".wait").css("color","#adadad")):($(".fixbg").css("display","none"),$(".error-main-t").html(n.result.message),$(".errorAlert").css("display","block"),$(".error-main").css("margin-top",-$(".error-main").height()/2))},error:function(){$(".error-main-t").html(data.message),$(".errorAlert").css("display","block"),$(".error-main").css("margin-top",-$(".error-main").height()/2)}})},copyFunction:function(){},leftFunction:function(){window.location.href="productDetails.html?eventName=fatBurn&typeSize=1&refer=1&linkId="+getParamByUrl("linkId")}}),p=i.createClass({displayName:"Component",render:function(){return i.createElement("div",null,i.createElement(d,null),i.createElement(o,null))}});t.render(i.createElement(p,null),document.getElementById("orderDetailsBox"))}},[225]);