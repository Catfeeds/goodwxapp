webpackJsonp([26],{222:function(e,a,o){"use strict";var s=o(0),t=o(2),r=o(3),c={SCategory_SWoDeYouHuiQuan:5080900,SWoDeYouHuiQuan_RanZhiYingYouHuiQuan:5080901,SWoDeYouHuiQuan_GouChengYouHuiMa:5080902,SWoDeYouHuiQuan_QianWangYouZan:5080903,SWoDeYouHuiQuan_RanZhiYingDingDan:5080904},n={SCategory_SWoDeDingDan:5080400,SWoDeDingDan_DengDaiFuKuan:5080401,SWoDeDingDan_YiWanCheng:5080402,SWoDeDingDan_YiGuanBi:5080403,SWoDeDingDan_YiQuXiao:5080404,SWoDeDingDan_QuZhiFu:5080405},i={outAppLogin:0!=getCookie("appOutPhone")};window.publicData=i;var l=s.createClass({displayName:"MyInfoBoxContainer",getInitialState:function(){var e=this;return e.getOrders(),e.findCoupon(),{myOrderData:{},couponList:[],codeList:[]}},componentWillMount:function(){0==i.outAppLogin&&(window.location.href="productDetails.html?linkId="+getParamByUrl("linkId")+"&innerToOut=1")},componentDidMount:function(){},render:function(){var e=this,a=e.state.myOrderData,o="";if(void 0!==e.state.myOrderData.resp)if(a.resp.records.length>0){for(var t=s.createElement("span",{className:"wait"},"等待付款"),r=s.createElement("span",{className:"ok"},"已完成"),c=s.createElement("span",{className:"ok"},"已关闭"),n=s.createElement("span",{className:"ok"},"已取消"),i="",l="",m=s.createElement("span",{className:"ok"},"退款中"),d=s.createElement("span",{className:"ok"},"退款完成"),p=[],u=0;u<a.resp.records.length;u++)if(0==a.resp.records[u].orderType?(i=t,l=s.createElement("div",{className:"col-xs-4 col-sm-4 gotoPay"},s.createElement("span",{"data-order":JSON.stringify(a.resp.records[u]),onClick:e.payToFunction,className:"PayTo","data-goods_type":a.resp.records[u].goodsType,"data-price":a.resp.records[u].currentPrice,"data-order_id":a.resp.records[u].orderId},"去支付"))):1==a.resp.records[u].orderType?(i=r,l=""):2==a.resp.records[u].orderType?(i=n,l=""):3==a.resp.records[u].orderType?(i=c,l=""):4==a.resp.records[u].orderType?(i=m,l=""):5==a.resp.records[u].orderType&&(i=d,l=""),1==a.resp.records[u].goodsType)p.push(s.createElement("aside",{key:u,"data-index":u,className:"row order","data-goods_type":a.resp.records[u].goodsType,"data-order_id":a.resp.records[u].orderId,onClick:e.orderFunction},s.createElement("div",{className:"row col-xs-12 col-sm-12 orderDetail"},s.createElement("div",{className:"col-xs-8 col-sm-8 number"},"订单编号：",a.resp.records[u].orderId),s.createElement("div",{className:"col-xs-4 col-sm-4 waitPay"},i,s.createElement("img",{src:"http://cdn2.picooc.com/web/res/fatburn/image/myOrder/more.png"}))),s.createElement("div",{className:"row col-xs-12 col-sm-12 info"},s.createElement("div",{className:"col-xs-3 col-sm-3 infoImg"},s.createElement("img",{src:a.resp.records[u].goodsUrl})),s.createElement("div",{className:"col-xs-9 col-sm-9 infoDesc"},s.createElement("h3",null,a.resp.records[u].goodsName),s.createElement("p",null,"开营时间：",a.resp.records[u].beginTime))),s.createElement("div",{className:"row col-xs-12 col-sm-12 pay"},s.createElement("div",{className:"col-xs-8 col-sm-8 payNum"},"实付款：",s.createElement("span",{className:"payprice"},"¥",a.resp.records[u].currentPrice)),l)));else if(2==a.resp.records[u].goodsType){var g=a.resp.records[u].createTime.substring(0,10);p.push(s.createElement("aside",{key:u,"data-index":u,className:"row order","data-goods_type":a.resp.records[u].goodsType,"data-order_id":a.resp.records[u].orderId,onClick:e.orderFunction},s.createElement("div",{className:"row col-xs-12 col-sm-12 orderDetail"},s.createElement("div",{className:"col-xs-8 col-sm-8 number"},"订单编号：",a.resp.records[u].orderId),s.createElement("div",{className:"col-xs-4 col-sm-4 waitPay"},i,s.createElement("img",{src:"http://cdn2.picooc.com/web/res/fatburn/image/myOrder/more.png"}))),s.createElement("div",{className:"row col-xs-12 col-sm-12 info"},s.createElement("div",{className:"col-xs-3 col-sm-3 infoImg"},s.createElement("img",{src:a.resp.records[u].goodsUrl})),s.createElement("div",{className:"col-xs-9 col-sm-9 infoDesc"},s.createElement("h3",null,a.resp.records[u].goodsName),s.createElement("p",null,"购买时间：",g))),s.createElement("div",{className:"row col-xs-12 col-sm-12 pay"},s.createElement("div",{className:"col-xs-8 col-sm-8 payNum"},"实付款：",s.createElement("span",{className:"payprice"},"¥",a.resp.records[u].currentPrice)),l)))}o=p}else o=s.createElement("div",{className:"row noOrder"},"暂无相关订单信息~");var v=e.state.couponList.length>0?"none":"block",h=e.state.codeList.length>0?"none":"block",y=[],N=[];return s.createElement("section",{className:"container"},s.createElement("div",{className:"row noAppTitle",style:{display:"none"}},s.createElement("div",{className:"col-xs-4 col-sm-4 left",onClick:e.leftFunction},"返回"),s.createElement("div",{className:"col-xs-4 col-sm-4 middle"},s.createElement("img",{src:"https://cdn2.picooc.com/web/res/fatburn/image/sell/productDetails/logoLeft.png"})),s.createElement("div",{className:"col-xs-4 col-sm-4"})),s.createElement("aside",{className:"row titleNew"},s.createElement("div",{className:"col-xs-4 col-sm-4 tab activeTab",onClick:e.leftBoxFunction,ref:"leftBox"},"订单"),s.createElement("div",{className:"col-xs-4 col-sm-4 tab",onClick:e.middleBoxFunction,ref:"middleBox"},"优惠券"),s.createElement("div",{className:"col-xs-4 col-sm-4 tab",onClick:e.rightBoxFunction,ref:"rightBox"},"购秤优惠码")),s.createElement("div",{className:"myOrders"},o),s.createElement("aside",{className:"row coupons",style:{display:"none"}},s.createElement("div",{style:{display:v},className:"row noCoupon"},"暂无可使用的优惠券~"),e.state.couponList.map(function(a,o){0==a.isUse?a.expire?y.push(s.createElement("div",{key:o,className:"row col-xs-12 col-sm-12 avail notAvail"},s.createElement("div",{className:"msg"},s.createElement("div",{className:"col-xs-6 col-sm-6 continue"},a.name),s.createElement("div",{className:"col-xs-6 col-sm-6 value"},s.createElement("span",{className:"value1"},"¥")," ",s.createElement("span",{className:"value2"},a.value))),s.createElement("div",{className:"col-xs-12 col-sm-12 term"},"有效期：",a.beginTime," - ",a.endTime),s.createElement("div",{className:"col-xs-12 col-sm-12 require"},a.rule),s.createElement("img",{className:"status",src:"image/withoutCamp/coupon3.png"}),s.createElement("div",{className:"col-xs-12 col-sm-12 goToSale"},"立即使用"))):y.push(s.createElement("div",{key:o,className:"row col-xs-12 col-sm-12 avail isAvail"},s.createElement("div",{className:"msg msgActive"},s.createElement("div",{className:"col-xs-6 col-sm-6 continue"},a.name),s.createElement("div",{className:"col-xs-6 col-sm-6 value"},s.createElement("span",{className:"value1"},"¥")," ",s.createElement("span",{className:"value2"},a.value))),s.createElement("div",{className:"col-xs-12 col-sm-12 term"},"有效期：",a.beginTime," - ",a.endTime),s.createElement("div",{className:"col-xs-12 col-sm-12 require"},a.rule),s.createElement("div",{className:"col-xs-12 col-sm-12 goToSale goToSaleIsAlive","data-link":a.link,onClick:e.goToLink},"立即使用"))):1==a.isUse&&y.push(s.createElement("div",{key:o,className:"row col-xs-12 col-sm-12 avail notAvail"},s.createElement("div",{className:"msg"},s.createElement("div",{className:"col-xs-6 col-sm-6 continue"},a.name),s.createElement("div",{className:"col-xs-6 col-sm-6 value"},s.createElement("span",{className:"value1"},"¥")," ",s.createElement("span",{className:"value2"},a.value))),s.createElement("div",{className:"col-xs-12 col-sm-12 term"},"有效期：",a.beginTime," - ",a.endTime),s.createElement("div",{className:"col-xs-12 col-sm-12 require"},a.rule),s.createElement("img",{className:"status",src:"image/withoutCamp/coupon2.png"}),s.createElement("div",{className:"col-xs-12 col-sm-12 goToSale"},"立即使用")))}),y),s.createElement("aside",{className:"row couponCode",style:{display:"none"}},s.createElement("div",{style:{display:h},className:"row noCoupon"},"暂无可使用的优惠码~"),e.state.codeList.map(function(a,o){a.expire?N.push(s.createElement("div",{key:o,className:"row col-xs-12 col-sm-12 avail notAvail divBox"},s.createElement("div",{className:"msg"},s.createElement("div",{className:"col-xs-8 col-sm-8 continue"},s.createElement("p",{className:"zan"},a.name),s.createElement("input",{type:"text",style:{position:"absolute",zIndex:"-999"},id:"theCode"+o,ref:"theCode"+o,value:a.coupon_code,readOnly:!0}),s.createElement("p",{className:"zanNum zanNum2"},s.createElement("span",{className:"aboutCouponCode"},a.coupon_code)," ",s.createElement("span",{"data-index":o,"data-code":a.coupon_code,className:"copy copy2",id:"copyThisCode"+o,"data-clipboard-action":"copy","data-clipboard-target":"#theCode"+o},"  复制 "))),s.createElement("div",{className:"col-xs-4 col-sm-4 value"},s.createElement("span",{className:"value1"},"¥")," ",s.createElement("span",{className:"value2"},a.value))),s.createElement("div",{className:"col-xs-12 col-sm-12 term"},"有效期：",a.begin_time,"- ",a.end_time),s.createElement("div",{className:"col-xs-12 col-sm-12 require"},a.rule),s.createElement("img",{className:"status",src:"image/withoutCamp/coupon3.png"}),s.createElement("div",{className:"col-xs-12 col-sm-12 goTo goTo2",onClick:e.goToFunction},"前往有赞使用"))):N.push(s.createElement("div",{key:o,className:"row col-xs-12 col-sm-12 avail isAvail divBox"},s.createElement("div",{className:"msg msgActive"},s.createElement("div",{className:"col-xs-8 col-sm-8 continue"},s.createElement("p",{className:"zan"},a.name),s.createElement("input",{type:"text",style:{position:"absolute",zIndex:"-999"},id:"theCode"+o,ref:"theCode"+o,value:a.coupon_code,readOnly:!0}),s.createElement("p",{className:"zanNum"},s.createElement("span",{className:"aboutCouponCode"},a.coupon_code)," ",s.createElement("span",{"data-index":o,"data-code":a.coupon_code,className:"copy copy3",id:"copyThisCode"+o,"data-clipboard-action":"copy","data-clipboard-target":"#theCode"+o}," 复制 "))),s.createElement("div",{className:"col-xs-4 col-sm-4 value"},s.createElement("span",{className:"value1"},"¥")," ",s.createElement("span",{className:"value2"},a.value))),s.createElement("div",{className:"col-xs-12 col-sm-12 term"},"有效期：",a.begin_time,"- ",a.end_time),s.createElement("div",{className:"col-xs-12 col-sm-12 require"},a.rule),s.createElement("div",{className:"col-xs-12 col-sm-12 goTo",onClick:e.goToFunction},"前往有赞使用")))}),N))},findCoupon:function(){var e=this,a=ajaxLink+"/v1/api/campCoupon/findCouponOut"+window.location.search;$.ajax({type:"get",url:a,dataType:"json",success:function(o){if(console.log("获取优惠券列表",o),console.log(a),200==o.code){e.setState({couponList:o.resp.couponList,codeList:o.resp.codeList});for(var s=0;s<o.resp.codeList.length;s++){var t=new Clipboard("#copyThisCode"+s);t.on("success",function(e){console.log(e),$(".fixBg").css("height",$(window).height()),$(".fixBg-main").css("width",$(window).width()-140),$(".fixBg-p").css("display","block"),$(".fixBg").css("display","block"),$(".fixBg-p").html("复制成功，前往有赞去使用吧~"),$(".fixBg-main").css("margin-top",-$(".fixBg-main").height()/2),setTimeout(function(){$(".fixBg").css("display","none"),$(".fixBg-p").css("display","none")},1500)}),t.on("error",function(e){console.log(e)})}}else $(".error-main-t").html(o.result.message),$(".errorAlert").css("display","block"),$(".error-main").css("margin-top",-$(".error-main").height()/2)}})},getCampCode:function(){var e=ajaxLink+"/v1/api/campCode/getCampCode"+window.location.search;$.ajax({type:"get",url:e,dataType:"json",success:function(a){console.log(a),console.log(e),200==a.code?console.log("获取购秤优惠码列表",a):($(".error-main-t").html(a.result.message),$(".errorAlert").css("display","block"),$(".error-main").css("margin-top",-$(".error-main").height()/2))}})},goToFunction:function(){if(setMaiDian(c.SCategory_SWoDeYouHuiQuan,c.SWoDeYouHuiQuan_QianWangYouZan),"isApp"==isMobile()){var e={link:"https://h5.koudaitong.com/v2/goods/361jk71ya1ddk",animation:1};e=JSON.stringify(e),appFc.openWebview(e)}else window.location.href="https://h5.koudaitong.com/v2/goods/361jk71ya1ddk"},copyFunction:function(e){var a=this;console.log(a),e.stopPropagation();var o=e.currentTarget.getAttribute("data-code"),s=e.currentTarget.getAttribute("data-index"),t="theCode"+s;if(console.log("22",a.refs[t]),a.refs[t].select(),document.execCommand("Copy"),"isApp"==isMobile()){var r=function(){var e={content:o};return JSON.stringify(e)};appFc.copyContent(r)}$(".fixBg").css("height",$(window).height()),$(".fixBg-main").css("width",$(window).width()-140),$(".fixBg-p").css("display","block"),$(".fixBg").css("display","block"),$(".fixBg-p").html("复制成功，前往有赞去使用吧~"),$(".fixBg-main").css("margin-top",-$(".fixBg-main").height()/2),setTimeout(function(){$(".fixBg").css("display","none"),$(".fixBg-p").css("display","none")},1500)},leftBoxFunction:function(e){var a=this;setMaiDian(c.SCategory_SWoDeYouHuiQuan,c.SWoDeYouHuiQuan_RanZhiYingYouHuiQuan),$(".titleNew .tab").removeClass("activeTab"),$(a.refs.leftBox).addClass("activeTab"),$(".myOrders").show(),$(".coupons,.couponCode").hide()},middleBoxFunction:function(e){var a=this;setMaiDian(c.SCategory_SWoDeYouHuiQuan,c.SWoDeYouHuiQuan_RanZhiYingDingDan),$(".titleNew .tab").removeClass("activeTab"),$(a.refs.middleBox).addClass("activeTab"),$(".coupons").show(),$(".myOrders,.couponCode").hide()},rightBoxFunction:function(e){var a=this;setMaiDian(c.SCategory_SWoDeYouHuiQuan,c.SWoDeYouHuiQuan_GouChengYouHuiMa),$(".titleNew .tab").removeClass("activeTab"),$(a.refs.rightBox).addClass("activeTab"),$(".couponCode").show(),$(".myOrders,.coupons").hide()},getOrders:function(){var e=this,a=ajaxLink+"/v1/api/campOrder/findOrders"+window.location.search;$.ajax({type:"get",url:a,dataType:"json",success:function(a){200==a.code?(console.log("获取订单列表",a),void 0!==e.state.myOrderData.resp&&e.state.myOrderData.resp.records.length>0&&(a.resp.records=e.state.myOrderData.resp.records.concat(a.resp.records)),e.setState({myOrderData:a})):($(".error-main-t").html(a.result.message),$(".errorAlert").css("display","block"),$(".error-main").css("margin-top",-$(".error-main").height()/2))}})},orderFunction:function(e){e.stopPropagation();var a=this,o=a.state.myOrderData;$(e.currentTarget).css("opacity","0.6");var s=e.currentTarget.getAttribute("data-index");0==o.resp.records[s].orderType?setMaiDian(n.SCategory_SWoDeDingDan,n.SWoDeDingDan_DengDaiFuKuan):1==o.resp.records[s].orderType?setMaiDian(n.SCategory_SWoDeDingDan,n.SWoDeDingDan_YiWanCheng):2==o.resp.records[s].orderType?setMaiDian(n.SCategory_SWoDeDingDan,n.SWoDeDingDan_YiQuXiao):3==o.resp.records[s].orderType&&setMaiDian(n.SCategory_SWoDeDingDan,n.SWoDeDingDan_YiGuanBi);var t=e.currentTarget.getAttribute("data-order_id");setCookiePath("toOrderDetails","1",1,"/;domain=picooc.com"),1==e.currentTarget.getAttribute("data-goods_type")?window.location.href="orderDetailsOut.html"+window.location.search+"&orderId="+t:2==e.currentTarget.getAttribute("data-goods_type")&&(window.location.href="OrderDetailsOut.html"+window.location.search+"&orderId="+t)},payToFunction:function(e){e.stopPropagation(),setMaiDian(n.SCategory_SWoDeDingDan,n.SWoDeDingDan_QuZhiFu),delCookie("toOrderSuccess"),setCookiePath("toOrderSuccess","1",1,"/;domain=picooc.com");var a=JSON.parse(e.currentTarget.getAttribute("data-order")),o={goodsId:a.goodsId,orderId:a.orderId,userId:0,phoneNo:a.phoneNo,origPrice:a.originPrice,currentPrice:a.currentPrice,couponPrice:a.couponPrice,isCoupon:a.isCoupon,couponId:a.couponId,orderUrl:a.orderUrl,sourceType:a.sourceType,trafficSource:a.trafficSource,isOwnPicooc:a.isOwnPicooc};localStorage.setItem("goodsInfos",JSON.stringify(o));e.currentTarget.getAttribute("data-order_id"),e.currentTarget.getAttribute("data-price");if("micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i))if("微信"==o.sourceType){removeParamByUrl("phoneNo");for(var s=window.location.search.substring(1),t=s.split("&"),r="?",c=0;c<t.length;c++){var i=t[c].split("=");"phoneNo"!=i[0]&&(r+="&"+i[0]+"="+i[1])}window.location.href="payment.html"+r+"&phoneNo="+o.phoneNo+"&orderId="+o.orderId+"&fromGo=1"}else"燃脂营APP"==o.sourceType||"有赞"==o.sourceType?($(".error-main-t").html("该订单在有品app上生成哒，请在同一个渠道完成支付~"),$(".errorAlert").css("display","block"),$(".error-main").css("margin-top",-$(".fixbg-main").height()/2)):"微博"==o.sourceType?($(".error-main-t").html("该订单在微博上生成哒，请在同一个渠道完成支付~"),$(".errorAlert").css("display","block"),$(".error-main").css("margin-top",-$(".fixbg-main").height()/2)):"QQ"==o.sourceType?($(".error-main-t").html("该订单在qq上生成哒，请在同一个渠道完成支付~"),$(".errorAlert").css("display","block"),$(".error-main").css("margin-top",-$(".fixbg-main").height()/2)):"浏览器"==o.sourceType&&($(".error-main-t").html("该订单在浏览器上生成哒，请在同一个渠道完成支付~"),$(".errorAlert").css("display","block"),$(".error-main").css("margin-top",-$(".fixbg-main").height()/2));else if("微信"==o.sourceType)$(".error-main-t").html("该订单在微信上生成哒，请在同一个渠道完成支付~"),$(".errorAlert").css("display","block"),$(".error-main").css("margin-top",-$(".fixbg-main").height()/2);else if("燃脂营APP"==o.sourceType||"有赞"==o.sourceType)$(".error-main-t").html("该订单在有品app上生成哒，请在同一个渠道完成支付~"),$(".errorAlert").css("display","block"),$(".error-main").css("margin-top",-$(".fixbg-main").height()/2);else{removeParamByUrl("phoneNo");for(var s=window.location.search.substring(1),t=s.split("&"),r="?",c=0;c<t.length;c++){var i=t[c].split("=");"phoneNo"!=i[0]&&(r+="&"+i[0]+"="+i[1])}window.location.href="payment.html"+r+"&phoneNo="+o.phoneNo+"&orderUrl="+o.orderUrl+"&orderId="+o.orderId+"&fromGo=1"}e.stopPropagation()},goToLink:function(e){var a=e.currentTarget.getAttribute("data-link");window.location.href=a},leftFunction:function(){window.history.go(-1)}}),m=s.createClass({displayName:"FixBg",render:function(){return s.createElement("div",null,s.createElement("aside",{className:"row fixBg"},s.createElement("div",{className:"col-xs-12 col-sm-12 fixBg-main"},s.createElement("div",{className:"row"},s.createElement("div",{className:"col-xs-12 col-sm-12 fixBg-top"},s.createElement("div",{className:"row"},s.createElement("div",{className:"col-xs-12 col-sm-12 fixBg-p"})))))))}}),d=s.createClass({displayName:"Component",render:function(){return s.createElement("div",null,s.createElement(l,null),s.createElement(r,null),s.createElement(m,null))}});t.render(s.createElement(d,null),document.getElementById("myInfoBox"))}},[222]);