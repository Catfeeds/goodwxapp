webpackJsonp([34],{63:function(e,c,o){"use strict";var s=o(0),a=(o(2),o(3)),t={SCategory_SXuanZeYouHuiQuan:5080300,SXuanZeYouHuiQuan_BuShiYongYouHuiQuan:5080301,SXuanZeYouHuiQuan_ShiYongYouHuiQuan:5080302},n=s.createClass({displayName:"CouponList",CircleClick:function(e){e.stopPropagation(),e.preventDefault(),setMaiDian(t.SCategory_SXuanZeYouHuiQuan,t.SXuanZeYouHuiQuan_BuShiYongYouHuiQuan),PubSub.publish("test",1)},SelectCircle:function(e){e.stopPropagation(),e.preventDefault();var c=this.props.couponList,o=$(".circle1"),s=e.currentTarget;o.removeClass("active"),o.attr("src","https://cdn2.picooc.com/web/res/fatburn/image/sell/chooseCoupon/circle2.png"),$(s).children().children(".circle1").attr("src","https://cdn2.picooc.com/web/res/fatburn/image/sell/chooseCoupon/circle1.png"),$(s).children().children(".circle1").addClass("active");var a=$(s).find(".value2").html(),n=$(s).attr("data-index"),l=void 0==a?null:c[n-1].id;setCookie("youHuiState",a,1),setCookie("youHuiS",a,1),setCookie("currentCouponId",l,1),setCookie("chooseIndex",$(s).index(),1),"aside"==s.nodeName.toLowerCase()?(setMaiDian(t.SCategory_SXuanZeYouHuiQuan,t.SXuanZeYouHuiQuan_BuShiYongYouHuiQuan),setCookie("chooseIndex","noChoose2",1)):"div"==s.nodeName.toLowerCase()&&(setMaiDian(t.SCategory_SXuanZeYouHuiQuan,t.SXuanZeYouHuiQuan_ShiYongYouHuiQuan),setCookie("chooseIndex",n-1,1)),PubSub.publish("test",a)},deleteHistory:function(){var e=function(){var e={backNum:1,closeWebview:0};return JSON.stringify(e)};getParamByUrl("webver")>2?appFc.deleteHistory(e()):mobileApp.deleteHistory(e())},render:function(){var e=this.props.couponList,c=[],o=!1;if(e.length>0)for(var a=0;a<e.length;a++)0==e[a].isUse?e[a].expire?c.push(s.createElement("div",{className:"row col-xs-12 col-sm-12 avail notAvail",key:a},s.createElement("div",{className:"msg"},s.createElement("div",{className:"col-xs-8 col-sm-8 continue"},s.createElement("img",{className:"circle",src:"https://cdn2.picooc.com/web/res/fatburn/image/sell/chooseCoupon/circle2.png"}),"  ",s.createElement("span",null,e[a].name)),s.createElement("div",{className:"col-xs-4 col-sm-4 value"},s.createElement("span",{className:"value1"},"¥")," ",s.createElement("span",{className:"value2"},e[a].value))),s.createElement("div",{className:"col-xs-12 col-sm-12 term"},"有效期：",e[a].beginTime+"-",e[a].endTime),s.createElement("div",{className:"col-xs-12 col-sm-12 require"},e[a].rule),s.createElement("img",{className:"status",src:"https://cdn2.picooc.com/web/res/fatburn/image/sell/chooseCoupon/expire.png"}))):(o=!0,c.push(s.createElement("div",{className:"row col-xs-12 col-sm-12 avail isAvail",key:a},s.createElement("div",{className:"msg msg2 msgActive",onClick:this.SelectCircle,"data-index":a+1},s.createElement("div",{className:"col-xs-8 col-sm-8 continue"},s.createElement("img",{className:"circle circle1 aboutCircle keYongQuan",src:"https://cdn2.picooc.com/web/res/fatburn/image/sell/chooseCoupon/circle1.png"}),"  ",s.createElement("span",null,e[a].name)),s.createElement("div",{className:"col-xs-4 col-sm-4 value"},s.createElement("span",{className:"value1"},"¥")," ",s.createElement("span",{className:"value2"},e[a].value))),s.createElement("div",{className:"col-xs-12 col-sm-12 term"},"有效期：",e[a].beginTime+"-",e[a].endTime),s.createElement("div",{className:"col-xs-12 col-sm-12 require"}," ",e[a].rule)))):1==e[a].isUse&&c.push(s.createElement("div",{className:"row col-xs-12 col-sm-12 avail notAvail",key:a},s.createElement("div",{className:"msg"},s.createElement("div",{className:"col-xs-8 col-sm-8 continue"},s.createElement("img",{className:"circle",src:"https://cdn2.picooc.com/web/res/fatburn/image/sell/chooseCoupon/circle2.png"}),"  ",s.createElement("span",null,e[a].name)),s.createElement("div",{className:"col-xs-4 col-sm-4 value"},s.createElement("span",{className:"value1"},"¥")," ",s.createElement("span",{className:"value2"},e[a].value))),s.createElement("div",{className:"col-xs-12 col-sm-12 term"},"有效期：",e[a].beginTime+" - ",e[a].endTime),s.createElement("div",{className:"col-xs-12 col-sm-12 require"},e[a].rule),s.createElement("img",{className:"status",src:"https://cdn2.picooc.com/web/res/fatburn/image/sell/chooseCoupon/used.png"})));return s.createElement("div",null,s.createElement("aside",{className:"row noCoupons msg2",onClick:this.SelectCircle,"data-index":"0"},s.createElement("div",{className:"col-xs-2 col-sm-2 noImg"},s.createElement("img",{className:"circle circle1",src:1==o?"https://cdn2.picooc.com/web/res/fatburn/image/sell/chooseCoupon/circle2.png":"https://cdn2.picooc.com/web/res/fatburn/image/sell/chooseCoupon/circle1.png"})),s.createElement("div",{className:"col-xs-10 col-sm-10 noUse"},"不使用优惠劵")),s.createElement("aside",{className:"row coupons",style:{display:"block"}},c))}}),l=s.createClass({displayName:"CouponContainer",getInitialState:function(){return{couponList:[]}},componentWillMount:function(){var e=getCookie("chooseIndex");console.log("chooseIndex="+e);var c=ajaxLink+"/v1/api/campCoupon/findCoupon"+window.location.search;this.serverRequest=$.get(c,function(c){if(console.log(1,c),200==c.code)if(console.log("getCookie('youHuiState')",getCookie("youHuiState")),this.setState({couponList:c.resp.couponList}),c.resp.couponList.length>0)0==$(".msg2 .keYongQuan").length&&$(".circle1:first").attr("src","https://cdn2.picooc.com/web/res/fatburn/image/sell/chooseCoupon/circle1.png"),$(".aboutCircle").attr("src","https://cdn2.picooc.com/web/res/fatburn/image/sell/chooseCoupon/circle2.png"),""!=e?"noChoose2"==e?$(".circle1:first").attr("src","https://cdn2.picooc.com/web/res/fatburn/image/sell/chooseCoupon/circle1.png"):$(".aboutCircle").eq(Number(e)).attr("src","https://cdn2.picooc.com/web/res/fatburn/image/sell/chooseCoupon/circle1.png"):$(".aboutCircle:first").attr("src","https://cdn2.picooc.com/web/res/fatburn/image/sell/chooseCoupon/circle1.png");else{$(".coupons").html(""),$(".circle1").attr("src","https://cdn2.picooc.com/web/res/fatburn/image/sell/chooseCoupon/circle1.png");$(".coupons").append('<div class="row noCoupon">暂无可使用的优惠券～</div>')}else $(".error-main-t").html(c.result.message),$(".errorAlert").css("display","block"),$(".error-main").css("margin-top",-$(".error-main").height()/2)}.bind(this))},render:function(){var e=this.state.couponList;return s.createElement("section",{className:"container",id:"couponBoxNew",style:{display:"none"}},s.createElement(n,{couponList:e}),s.createElement(a,null))}});e.exports=l}},[63]);