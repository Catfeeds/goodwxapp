webpackJsonp([28],{223:function(e,r,a){"use strict";var t=a(0),o=a(1),s=a(3),c={SCategory_SWoDeDingDan:5080400,SWoDeDingDan_DengDaiFuKuan:5080401,SWoDeDingDan_YiWanCheng:5080402,SWoDeDingDan_YiGuanBi:5080403,SWoDeDingDan_YiQuXiao:5080404,SWoDeDingDan_QuZhiFu:5080405},n=t.createClass({displayName:"MyOrderContainer",getInitialState:function(){var e=this;return window.getOrders=e.getOrders,e.getOrders(),{myOrderData:{}}},render:function(){var e=this,r=e.state.myOrderData;console.log(r);var a="";if(void 0!==e.state.myOrderData.resp)if(r.resp.records.length>0){for(var o=t.createElement("span",{className:"wait"},"等待付款"),s=t.createElement("span",{className:"ok"},"已完成"),c=t.createElement("span",{className:"ok"},"已关闭"),n=t.createElement("span",{className:"ok"},"已取消"),i="",d="",l=t.createElement("span",{className:"ok"},"退款中"),m=t.createElement("span",{className:"ok"},"退款完成"),p=[],g=0;g<r.resp.records.length;g++)if(0==r.resp.records[g].orderType?(i=o,d=t.createElement("div",{className:"col-xs-4 col-sm-4 gotoPay"},t.createElement("span",{onClick:e.payToFunction,className:"PayTo","data-goods_type":r.resp.records[g].goodsType,"data-price":r.resp.records[g].currentPrice,"data-order_id":r.resp.records[g].orderId,"data-source_type":r.resp.records[g].sourceType},"去支付"))):1==r.resp.records[g].orderType?(i=s,d=""):2==r.resp.records[g].orderType?(i=n,d=""):3==r.resp.records[g].orderType?(i=c,d=""):4==r.resp.records[g].orderType?(i=l,d=""):5==r.resp.records[g].orderType&&(i=m,d=""),1==r.resp.records[g].goodsType)p.push(t.createElement("aside",{key:g,"data-index":g,className:"row order","data-goods_type":r.resp.records[g].goodsType,"data-order_id":r.resp.records[g].orderId,onClick:e.orderFunction},t.createElement("div",{className:"row col-xs-12 col-sm-12 orderDetail"},t.createElement("div",{className:"col-xs-8 col-sm-8 number"},"订单编号：",r.resp.records[g].orderId),t.createElement("div",{className:"col-xs-4 col-sm-4 waitPay"},i,t.createElement("img",{src:"http://cdn2.picooc.com/web/res/fatburn/image/myOrder/more.png"}))),t.createElement("div",{className:"row col-xs-12 col-sm-12 info"},t.createElement("div",{className:"col-xs-3 col-sm-3 infoImg"},t.createElement("img",{src:r.resp.records[g].goodsUrl})),t.createElement("div",{className:"col-xs-9 col-sm-9 infoDesc"},t.createElement("h3",null,r.resp.records[g].goodsName),t.createElement("p",null,"开营时间：",r.resp.records[g].beginTime))),t.createElement("div",{className:"row col-xs-12 col-sm-12 pay"},t.createElement("div",{className:"col-xs-8 col-sm-8 payNum"},"实付款：",t.createElement("span",{className:"payprice"},"¥",r.resp.records[g].currentPrice)),d)));else if(2==r.resp.records[g].goodsType){var u=r.resp.records[g].createTime.substring(0,10);p.push(t.createElement("aside",{key:g,"data-index":g,className:"row order","data-goods_type":r.resp.records[g].goodsType,"data-order_id":r.resp.records[g].orderId,onClick:e.orderFunction},t.createElement("div",{className:"row col-xs-12 col-sm-12 orderDetail"},t.createElement("div",{className:"col-xs-8 col-sm-8 number"},"订单编号：",r.resp.records[g].orderId),t.createElement("div",{className:"col-xs-4 col-sm-4 waitPay"},i,t.createElement("img",{src:"http://cdn2.picooc.com/web/res/fatburn/image/myOrder/more.png"}))),t.createElement("div",{className:"row col-xs-12 col-sm-12 info"},t.createElement("div",{className:"col-xs-3 col-sm-3 infoImg"},t.createElement("img",{src:r.resp.records[g].goodsUrl})),t.createElement("div",{className:"col-xs-9 col-sm-9 infoDesc"},t.createElement("h3",null,r.resp.records[g].goodsName),t.createElement("p",null,"购买时间：",u))),t.createElement("div",{className:"row col-xs-12 col-sm-12 pay"},t.createElement("div",{className:"col-xs-8 col-sm-8 payNum"},"实付款：",t.createElement("span",{className:"payprice"},"¥",r.resp.records[g].currentPrice)),d)))}a=p}else a=t.createElement("div",{className:"row noOrder"},"暂无相关订单信息~");return t.createElement("section",{className:"container"},t.createElement("div",{className:"myOrders"},a))},getOrders:function(){var e=this,r=ajaxLink+"/v1/api/campOrder/findOrders"+window.location.search;console.log(r),$.ajax({type:"get",url:r,dataType:"json",success:function(r){200==r.code?(void 0!==e.state.myOrderData.resp&&e.state.myOrderData.resp.records.length>0&&(r.resp.records=e.state.myOrderData.resp.records.concat(r.resp.records)),e.setState({myOrderData:r})):($(".error-main-t").html(r.result.message),$(".errorAlert").css("display","block"),$(".error-main").css("margin-top",-$(".error-main").height()/2))}})},orderFunction:function(e){e.stopPropagation();var r=this,a=r.state.myOrderData;$(e.currentTarget).css("opacity","0.6");var t=e.currentTarget.getAttribute("data-index");0==a.resp.records[t].orderType?setMaiDian(c.SCategory_SWoDeDingDan,c.SWoDeDingDan_DengDaiFuKuan):1==a.resp.records[t].orderType?setMaiDian(c.SCategory_SWoDeDingDan,c.SWoDeDingDan_YiWanCheng):2==a.resp.records[t].orderType?setMaiDian(c.SCategory_SWoDeDingDan,c.SWoDeDingDan_YiQuXiao):3==a.resp.records[t].orderType&&setMaiDian(c.SCategory_SWoDeDingDan,c.SWoDeDingDan_YiGuanBi);var o=e.currentTarget.getAttribute("data-order_id");setCookiePath("toOrderDetails","1",1,"/;domain=picooc.com"),1==e.currentTarget.getAttribute("data-goods_type")?window.location.href="orderDetails.html"+window.location.search+"&orderId="+o:2==e.currentTarget.getAttribute("data-goods_type")&&(window.location.href="hdOrderDetails.html"+window.location.search+"&orderId="+o)},payToFunction:function(e){e.stopPropagation(),setMaiDian(c.SCategory_SWoDeDingDan,c.SWoDeDingDan_QuZhiFu),delCookie("toOrderSuccess"),setCookiePath("toOrderSuccess","1",1,"/;domain=picooc.com");var r=e.currentTarget.getAttribute("data-order_id"),a=e.currentTarget.getAttribute("data-price"),t=$.trim(e.currentTarget.getAttribute("data-source_type")),o=isMobile();if(1==e.currentTarget.getAttribute("data-goods_type"))if("燃脂营APP"==t||"有赞"==t){if("isApp"==o){var s=function(){var e={orderId:r,url:absoluteUrl+"orderSuccess.html"+window.location.search+"&orderId="+r,price:a,isRefresh:!0,function:""};return JSON.stringify(e)};getParamByUrl("webver")>2?appFc.gotoPay(s()):mobileApp.gotoPay(s())}}else"微信"==t?($(".error-main-t").html("该订单在微信上生成哒，请在同一个渠道完成支付~"),$(".errorAlert").css("display","block"),$(".error-main").css("margin-top",-$(".fixbg-main").height()/2)):"微博"==t?($(".error-main-t").html("该订单在微博上生成哒，请在同一个渠道完成支付~"),$(".errorAlert").css("display","block"),$(".error-main").css("margin-top",-$(".fixbg-main").height()/2)):"QQ"==t?($(".error-main-t").html("该订单在qq上生成哒，请在同一个渠道完成支付~"),$(".errorAlert").css("display","block"),$(".error-main").css("margin-top",-$(".fixbg-main").height()/2)):($(".error-main-t").html("该订单在浏览器上生成哒，请在同一个渠道完成支付~"),$(".errorAlert").css("display","block"),$(".error-main").css("margin-top",-$(".fixbg-main").height()/2));else if(2==e.currentTarget.getAttribute("data-goods_type")&&"isApp"==o){var n=function(){var e={orderId:r,url:absoluteUrl+"hdPaySuccess.html"+window.location.search+"&orderId="+r,price:a,isRefresh:!0,function:"getOrders"};return JSON.stringify(e)};getParamByUrl("webver")>2?appFc.gotoPay(n()):mobileApp.gotoPay(n())}}}),i=t.createClass({displayName:"Component",render:function(){return t.createElement("div",null,t.createElement(n,null),t.createElement(s,null))}});o.render(t.createElement(i,null),document.getElementById("myOrderBox"))}},[223]);