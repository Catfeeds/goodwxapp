webpackJsonp([17],{246:function(e,a,t){"use strict";var r=t(0),n=t(1),o=t(3),c=r.createClass({displayName:"CardShareContainer",getInitialState:function(){var e=this;return window.cardShareFun=e.cardShareFun,e.cardShareFun(),e.clientControlFun(),{cardShareData:{}}},render:function(){var e=this,a=e.state.cardShareData;console.log(a);var t="",n=["早餐","午餐","晚餐","加餐","运动","饮食","小结"],o=0;if(setInterval(function(){4==o&&(o=0),0==o?$(".loadingBox .point").html(""):1==o?$(".loadingBox .point").html("."):2==o?$(".loadingBox .point").html(".."):3==o&&$(".loadingBox .point").html("..."),o++},500),void 0!==e.state.cardShareData.resp){var c=e.state.cardShareData.resp;console.log("cardShareData",c);for(var l=[],s=0;s<c.imgs.length;s++)l.push(c.imgs[s].url);console.log(l);var i=[];0==l.length?i=r.createElement("div",{className:"noImgs"},r.createElement("div",{className:"dottedLine"})):l.map(function(e,a){i.push(r.createElement("img",{src:l[a],alt:"",key:a}))});var m=c.evaluate;if(null!=m.id){for(var d=m.starLevel,h=[],s=0;s<d;s++)h.push(r.createElement("img",{className:"star",src:"https://cdn2.picooc.com/web/res/fatburn/image/cardShare/haveStar.png",alt:"",key:s}));for(var p=0;p<5-d;p++)h.push(r.createElement("img",{className:"star",src:"https://cdn2.picooc.com/web/res/fatburn/image/cardShare/noStar.png",alt:"",key:p+5}));var u=(null!=m.proteinText&&""!=m.proteinText?m.proteinText+"，":"")+(null!=m.waterText&&""!=m.waterText?m.waterText+"，":"")+(null!=m.fatText&&""!=m.fatText?m.fatText+"，":"")+(null!=m.vegetablesText&&""!=m.vegetablesText?m.vegetablesText+"，":"")+(null!=m.performanceText&&""!=m.performanceText?m.performanceText+"，":"")+(null!=m.cookingText&&""!=m.cookingText?m.cookingText+"，":"");u=u.substring(0,u.length-1);var g=r.createElement("div",{className:"shareCoachSay"},r.createElement("div",{className:"aboutSay"},r.createElement("div",{className:"comments"},r.createElement("span",{className:"key"},"教练评价："),r.createElement("span",null,h),r.createElement("span",{className:"number"},m.starLevel+".0")),r.createElement("div",{className:"desc"},u),r.createElement("div",{className:"desc"},m.content)))}t=r.createElement("div",{className:"cardShareWrap"},r.createElement("div",{className:"row shareHeader"},r.createElement("div",{className:"col-xs-6 col-sm-6 left"},r.createElement("span",{className:"label"},r.createElement("i",null,n[c.type]),"打卡")),r.createElement("div",{className:"col-xs-6 col-sm-6 right"},r.createElement("span",{className:"name"},c.roleName),r.createElement("img",{className:"headImg",src:c.roleImg,onError:imgError.bind(e,c.roleSex)}))),r.createElement("div",{className:"row shareImgs"},i),r.createElement("div",{className:"shareDesc"},r.createElement("p",{className:"descText",dangerouslySetInnerHTML:{__html:c.content}})),g)}return r.createElement("div",null,r.createElement("p",{className:"loadingBox"},"LOADING",r.createElement("span",{className:"point"},"...")),r.createElement("section",{className:"container",style:{display:"none"}},t))},cardShareFun:function(){var e=this,a=ajaxLink+"/v1/api/camp/checkDetail"+window.location.search+"&type=1";console.log(a),$.ajax({type:"get",url:a,dataType:"json",success:function(a){if(200==a.code){e.setState({cardShareData:a});var t=$(".cardShareWrap .shareImgs img").length,r=0;if(0==t){var n=$(window).height(),o=$(".container").height();o<n?($(".loadingBox").hide(),$(".container").css("marginTop",(n-o)/2).show()):($(".loadingBox").hide(),$(".container").show())}else $(".cardShareWrap .shareImgs img").on("load",function(){if(++r===t){var e=$(window).height(),a=$(".container").height();a<e?($(".loadingBox").hide(),$(".container").css("marginTop",(e-a)/2).show()):($(".loadingBox").hide(),$(".container").show())}})}else $(".error-main-t").html(a.result.message),$(".errorAlert").css("display","block"),$(".error-main").css("margin-top",-$(".error-main").height()/2)}})},clientControlFun:function(){if(getParamByUrl("webver")>2){appFc.controlLeft(function(){var e={iconType:0,iconColor:"",backNum:1,closeWebview:0,hidden:!1,isHandle:!1,functionName:""};return JSON.stringify(e)}())}else{"isApp"==r&&"undefined"!=typeof mobileApp&&mobileApp.showLeftBtn(function(){var e={iconType:0,backNum:1,closeWebview:0,iconUrl:"",hidden:!1,isHandle:!1,functionName:""};return JSON.stringify(e)}()),document.documentElement.style.webkitTouchCallout="none"}if(getParamByUrl("webver")>2){var e={iconType:0,title:"分享",color:"",opacity:"",backgroundColor:"",backgroundOpacity:""};e=JSON.stringify(e),appFc.controlTitle(e);var a="",t=["https://cdn2.picooc.com/web/res/event/chrome/android_share.png","https://cdn2.picooc.com/web/res/event/chrome/ios_share.png"];a="android"==getParamByUrl("os")?t[0]:t[1];appFc.controlRight(function(){var e={iconType:0,rightStr:{str:"",color:"",opacity:"",id:"0"},rightIcon:[{type:"1",id:"1",functionName:"",iconUrl:a,iconName:"分享",redDotType:"1",redDotShow:!1,redDotNum:"0",nativeType:"0",content:{shareTitle:"有品·燃脂营",shareUrl:"",shareIcon:"",shareDesc:"#有品燃脂营，随时减脂有效塑形#@有品PICOOC",shareTag:"",shareType:2,shareBackgroundColor:"",shareTypeDesc:"",fatBurnName:""}}]};return JSON.stringify(e)}())}else{var r=isMobile();"isApp"==r&&"undefined"!=typeof mobileApp&&mobileApp.getShareInfo(function(){var e={title:"分享",backgroundColor:"#2c2f31",isShare:!0,shareTitle:"有品·燃脂营",shareUrl:"",shareIcon:"",shareDesc:"#有品燃脂营，随时减脂有效塑形#@有品PICOOC",shareType:2,shareTypeDesc:"",color:"",opacity:"",backgroundOpacity:""};return JSON.stringify(e)}()),document.documentElement.style.webkitTouchCallout="none"}}}),l=r.createClass({displayName:"Component",render:function(){return r.createElement("div",null,r.createElement(c,null),r.createElement(o,null))}});n.render(r.createElement(l,null),document.getElementById("cardShareBox"))}},[246]);