<!doctype html>
<html>
	<head>
	<title>阶段报告</title>
	<meta charset='utf-8' />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />
	<meta http-equiv="x-dns-prefetch-control" content="on" />
	<meta name="format-detection"content="telephone=no"/>
	<meta name="format-detection" content="email=no"/>
	<link rel="stylesheet" type="text/css" href="css/bootstraptc.min.css">
	<link rel="stylesheet" type="text/css" href="css/ppublic.css">
	<script>
	
		
		//alert(lang);
	</script>
	<style type="text/css">
	.test1 img{
		width: 100px;
	}
	.add{
		width: 150px;
		height: 150px;
		background: #b18035;
		font-size: 16px;
	}
	#num{
		text-align: center;
		font-size: 16px;
		margin-bottom: 20px;
	}
	#t1{
		width: 100%;
		height: 300px;
		overflow-x: hidden;
		position: relative;
		
	}
	.line{
		/*background: red;*/
		position: absolute;
		left: 0;
		top: 0;
	}
	#line-bg{
		position: absolute;
		top: 0;
		left: 5px;
		width: 2px;
		height: 100px;
		background: url(image/bg11.png) no-repeat top center;
		background-size: 2px 200px;
	}
	</style>
	</head>
	<body>
		<div id="num">0</div>
		<div id="t1">
			<canvas class="line" id="weight" width="8160px" height="100px"></canvas>
			<div id="line-bg"></div>
		</div>
		
	</body>
	<script type="text/javascript" src="js/jquery-3.0.0.min.js"></script>
	<script type="text/javascript" src="js/public.js"></script>
	<script type="text/javascript" src="js/1.js?v=3"></script>
	<script>
	$(function(){
		var tScale  = window.devicePixelRatio;
		
		var oC1=$("#weight").get(0);
		var oC1=oC1.getContext('2d');
		$("#weight").css("width",8160);
		$("#weight").css("height",100);
		oC1.width=8160*2;
		oC1.height=100*2;
		
	  	oC1.strokeStyle = "#000000";
		oC1.lineWidth = 1*2;
		oC1.font="12px Arial";
		for(var i=0;i<1360;i++){
			if(i%5==0){
				oC1.beginPath();
				oC1.moveTo(5*i*2+1,0);
				oC1.lineTo(5*i*2+1,32);
				oC1.strokeStyle = "#000000";
				oC1.stroke();
				oC1.textAlign="center";
				oC1.fillText(i/10,5*i*2+1,46);
			}
			else{
				oC1.beginPath();
				oC1.moveTo(5*i*2+1,8);
				oC1.lineTo(5*i*2+1,32);
				oC1.strokeStyle = "#000000";
				oC1.stroke();
			}
			
		}
		
		var startX;
		var startY;
		var moveEndX;
		var moveEndY;
		var testLeft;
		$("#line-bg").css("left",parseInt($(window).width()/2));
		$(".line").css("left",(parseInt($(".line").css("left")))+(parseInt($(window).width()/2)-parseInt($(".line").css("left")))%10);
		$("#num").html((parseInt($(window).width()/2)-parseInt($(".line").css("left")))/100);
		//$(".line").css("left","-1px");
		$(".line").on("touchstart",function(e){
			event.preventDefault();//阻止触摸时浏览器的缩放、滚动条滚动  
			startX = e.originalEvent.changedTouches[0].pageX,
    		startY = e.originalEvent.changedTouches[0].pageY;
			testLeft=parseInt($(".line").css("left"));
		});
		$(".line").on("touchmove",function(e){
			moveEndX = e.originalEvent.changedTouches[0].pageX;
   			moveEndY = e.originalEvent.changedTouches[0].pageY;
   			var moveX;
   			var moveY;
   			moveX=moveEndX-startX;
   			moveY=moveEndY-startY;
   			
   			if((testLeft+moveX)>$(window).width()/2){
   				$(".line").css("left",$(window).width()/2);
   			}
   			else if((testLeft+moveX)<-8160-$(window).width()/10){
   				$(".line").css("left",-8160+"px");
   			}
   			else{
   				$(".line").css("left",testLeft+moveX);
   			}
				
		});
		
		$(".line").on("touchend",function(e){
			$(".line").css("left",(parseInt($(".line").css("left")))+(parseInt($(window).width()/2)-parseInt($(".line").css("left")))%10);
			$("#num").html((parseInt($(window).width()/2)-parseInt($(".line").css("left")))/100);
		})
	})
</script>
</html>