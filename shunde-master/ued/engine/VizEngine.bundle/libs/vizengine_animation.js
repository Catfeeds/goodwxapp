module("/libs/vizengine_gesture.js",function(){com.vizengine.animation={};var h=com.vizengine.core.Object;h.extend("com.vizengine.animation.TimeInterceptor",{getInterception:function(a){return a}});var k=com.vizengine.animation.TimeInterceptor;com.vizengine.animation.TimeInterplator=k;k.extend("com.vizengine.animation.DecelerateInterceptor",{init:function(a){k.prototype.init.apply(this,arguments);this.factor=null!=a?a:1},getInterception:function(a){var b=0;return b=1==this.factor?1-(1-a)*(1-a):1-
Math.pow(1-a,2*this.factor)}});com.vizengine.animation.DecelerateInterpolator=com.vizengine.animation.DecelerateInterceptor;h.extend("com.vizengine.animation.Animation",{init:function(){h.prototype.init.apply(this,arguments);this.callback=null;this.delay=this._beginTime=0;this.duration=1E3;this.timeInterplator=this.timeInterceptor=null;this.repeatCount=1;this._repeated=0},animate:function(a){var b=(new Date).getTime(),c=0;0==this._beginTime?this._beginTime=b:(c=b-this._beginTime-this.delay,this._repeated=
Math.floor(c/this.duration),c%=this.duration,c=c<this.duration?c/this.duration:1);if(this.delay>b-this._beginTime)return!0;b=!1;0<this.repeatCount&&this._repeated>=this.repeatCount&&(b=!0);b&&(c=1);var e=c,d=null!=this.timeInterceptor?this.timeInterceptor:this.timeInterplator;null!=d&&(e=d.getInterception(c));1<e&&(e=1);this.animateFrame(a,e);if(b){if(null!=this.callback){var f=this.callback;f.target=this;this.callback=null;f&&setTimeout(function(){f.call(f.target,!1);f=f.target=null})}return!1}return!0},
terminateIfNotFinished:function(){if(null!=this.callback){var a=this.callback;this.callback=null;a.call(this,!0)}},animateFrame:function(a,b){}});var d=com.vizengine.animation.Animation;d.animationViews=[];d.animating=!1;d.animateFrame=function(){for(var a=0,b=(new Date).getTime(),c=d.animationViews.length-1;0<=c;c--){var e=d.animationViews[c];if(null==e.animation)d.animationViews.splice(c,1);else if(e.animation.animate(e)){var g=60;null!=e.animation.fps&&(g=e.animation.fps);g>a&&(a=g)}else e.animation=
null,d.animationViews.splice(c,1)}a=1E3/a;c=0;b=(new Date).getTime()-b;b<a&&(c=a-b);0<d.animationViews.length?setTimeout(d.animateFrame,c):d.animating=!1};d.requestAnimation=function(a){d.animationViews.push(a);d.animating||(d.animating=!0,d.animateFrame())};d.terminateAnimation=function(a){for(var b=0;b<d.animationViews.length;b++){var c=d.animationViews[b];if(c==a){null!=c.animation&&(c.animation.terminateIfNotFinished(),c.animation=null);break}}};d.extend("com.vizengine.animation.AnimationSet",
{init:function(){d.prototype.init.apply(this,arguments);this.animations=[]},addAnimation:function(a){this.animations.push(a);this._updateAnimations()},_updateAnimations:function(){var a=0,b;for(b in this.animations){var c=this.animations[b];if(0==c.repeatCount){this.repeatCount=0;break}c.duration+c.delay>a&&(a=c.duration*c.repeatCount+c.delay)}this.duration=a;for(b in this.animations){var c=this.animations[b],e=c.delay/a;c.startProgress=e;c.endProgress=e+c.duration/a}},animateFrame:function(a,b){for(var c in this.animations)this.animations[c].animate(a);
return!1}});d.extend("com.vizengine.animation.AnimationList",{init:function(){d.prototype.init.apply(this,arguments);this.animations=[]},addAnimation:function(a){this.animations.push(a);this._updateAnimations()},_updateAnimations:function(){var a=0,b;for(b in this.animations)var c=this.animations[b],a=a+c.duration;var e=0;for(b in this.animations)c=this.animations[b],c.startProgress=e/a,c.endProgress=(e+c.duration)/a,e+=c.duration},animateFrame:function(a,b){for(var c in this.animations){var e=this.animations[c];
if(b<=e.endProgress)return c=(b-e.startProgress)/(e.endProgress-e.startProgress),null!=e.timeInterplator&&(c=e.timeInterplator.getInterpolation(c)),e.animateFrame(a,c)}return!1}});d.extend("com.vizengine.animation.TranslateAnimation",{fromTranslateX:null,fromTranslateY:null,toTranslateX:null,toTranslateY:null,animateFrame:function(a,b){null!=this.fromTranslateX&&null!=this.toTranslateX&&a.setTranslateX(this.fromTranslateX+(this.toTranslateX-this.fromTranslateX)*b);null!=this.fromTranslateY&&null!=
this.toTranslateY&&a.setTranslateY(this.fromTranslateY+(this.toTranslateY-this.fromTranslateY)*b)}});d.extend("com.vizengine.animation.RotateAnimation",{fromRotateX:null,toRotateX:null,fromRotateY:null,toRotateY:null,fromRotateZ:null,toRotateZ:null,animateFrame:function(a,b){var c=null,e=null,d=null;null!=this.fromRotateX&&null!=this.toRotateX&&(c=this.fromRotateX+(this.toRotateX-this.fromRotateX)*b);null!=this.fromRotateY&&null!=this.toRotateY&&(e=this.fromRotateY+(this.toRotateY-this.fromRotateY)*
b);null!=this.fromRotateZ&&null!=this.toRotateZ&&(d=this.fromRotateZ+(this.toRotateZ-this.fromRotateZ)*b);null!=c&&a.setRotateX(c);null!=e&&a.setRotateY(e);null!=d&&a.setRotateZ(d)}});d.extend("com.vizengine.animation.ScaleAnimation",{fromScaleX:null,fromScaleY:null,toScaleX:null,toScaleY:null,animateFrame:function(a,b){null!=this.fromScaleX&&null!=this.toScaleX&&a.setScaleX(this.fromScaleX+(this.toScaleX-this.fromScaleX)*b);null!=this.fromScaleY&&null!=this.toScaleY&&a.setScaleY(this.fromScaleY+
(this.toScaleY-this.fromScaleY)*b)}});d.extend("com.vizengine.animation.BezierAnimation",{init:function(){d.prototype.init.apply(this,arguments);this.bezierPoints=[];this.bezierPoints[0]=new UPPoint;this.bezierPoints[1]=new UPPoint;this.bezierPoints[2]=new UPPoint;this.bezierPoints[3]=new UPPoint;this.bezierPoints[0].x=0;this.bezierPoints[0].y=0;this.bezierPoints[1].x=0;this.bezierPoints[1].y=.7;this.bezierPoints[2].x=.3;this.bezierPoints[2].y=1;this.bezierPoints[3].x=1;this.bezierPoints[3].y=1},
setBezierCP1:function(a,b){this.bezierPoints[1].x=a;this.bezierPoints[1].y=b},setBezierCP2:function(a,b){this.bezierPoints[2].x=a;this.bezierPoints[2].y=b},getPointFromBezier:function(a){var b=this.bezierPoints,c,d,g,f,h,l,m,k,n=new UPPoint;g=3*(b[1].x-b[0].x);d=3*(b[2].x-b[1].x)-g;c=b[3].x-b[0].x-g-d;l=3*(b[1].y-b[0].y);h=3*(b[2].y-b[1].y)-l;f=b[3].y-b[0].y-l-h;m=a*a;k=m*a;n.x=c*k+d*m+g*a+b[0].x;n.y=f*k+h*m+l*a+b[0].y;return n},animateFrame:function(a,b){var c=this.getPointFromBezier(b);a.setTranslate(c.x,
c.y,0)}});d.extend("com.vizengine.animation.AlphaAnimation",{fromAlpha:null,toAlpha:null,animateFrame:function(a,b){a.setAlpha(this.fromAlpha+(this.toAlpha-this.fromAlpha)*b)}})});
