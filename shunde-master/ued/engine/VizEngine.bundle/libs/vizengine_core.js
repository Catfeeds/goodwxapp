module("vizengine_class.js",function(){com.vizengine.core={};com.vizengine.core.Platform={chrome:-1<navigator.userAgent.indexOf("Chrome"),trident:-1<navigator.userAgent.indexOf("Trident"),presto:-1<navigator.userAgent.indexOf("Presto"),webKit:-1<navigator.userAgent.indexOf("AppleWebKit"),gecko:-1<navigator.userAgent.indexOf("Gecko")&&-1==navigator.userAgent.indexOf("KHTML"),mobile:!!navigator.userAgent.match(/AppleWebKit.*Mobile.*/),ios:!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),
android:-1<navigator.userAgent.indexOf("Android")||-1<navigator.userAgent.indexOf("Linux"),iPhone:-1<navigator.userAgent.indexOf("iPhone"),iPad:-1<navigator.userAgent.indexOf("iPad"),webApp:-1==navigator.userAgent.indexOf("Safari"),weixin:-1<navigator.userAgent.indexOf("MicroMessenger"),qq:" qq"==navigator.userAgent.match(/\sQQ/i),vizengineiOS:-1<navigator.userAgent.indexOf("vizengine-iOS"),vizengineAndroid:-1<navigator.userAgent.indexOf("vizengine-android"),vizengineMobile:-1<navigator.userAgent.indexOf("vizengine-")};
Class.extend("com.vizengine.core.Object",{init:function(){},interceptMethod:function(a,b){g.interceptMethod(this,a,b)},getClassName:function(){return this.constructor.className},getSimpleClassName:function(){var a=this.constructor.className.lastIndexOf(".");0>a&&(a=-1);return this.constructor.className.substring(a+1)}});var g=com.vizengine.core.Object;g.interceptMethod=function(a,b,c){var d=a[b];a[b]=function(){this._origin=d;var a=c.apply(this,arguments);delete this._origin;return a}};g.extend("com.vizengine.core.LRUCache",
{init:function(a){g.prototype.init.apply(this,arguments);this.capacity=a;this.keyMap=new Set;this.queue=[];this.onCacheRemoveCallback=null},contains:function(a){return this.keyMap.has(a)},get:function(a){if(this.keyMap.has(a))for(var b=0;b<this.queue.length;b++)if(this.queue[b].key===a){var c=this.queue[b].value;this.queue=this.queue.slice(0,b).concat(this.queue.slice(b+1));this.queue.unshift({key:a,value:c});break}return c},set:function(a,b){if(this.keyMap.has(a)){for(var c=-1,d=0;d<this.queue.length;d++)if(this.queue[d].key===
a){c=d;break}this.queue=this.queue.slice(0,c).concat(this.queue.slice(c+1))}else this.keyMap.add(a);this.queue.unshift({key:a,value:b});if(this.queue.length>this.capacity&&(c=this.queue.pop(),this.keyMap["delete"](c.key),this.onCacheRemoveCallback))this.onCacheRemoveCallback(c.key,c.value)}});com.vizengine.core.StringUtil={endsWith:function(a,b){return null==a||null==b||0==b.length||a.length<b.length?!1:a.substring(a.length-b.length,a.length)==b},startsWith:function(a,b){return null==a||null==b||
0==b.length||a.length<b.length?!1:a.substring(0,b.length)==b},firstToUpper:function(a){return null==a||0==a.length?a:a.substring(0,1).toUpperCase()+a.substring(1)},isEmpty:function(a){return null==a||0==a.length?!0:/^\s*$/.test(a)},trim:function(a){return a.replace(/(^\s*)|(\s*$)/g,"")}};com.vizengine.core.Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a){var b="",c,d,e,h,k,f,g=0;for(a=l._utf8_encode(a);g<a.length;)c=a.charCodeAt(g++),d=a.charCodeAt(g++),
e=a.charCodeAt(g++),h=c>>2,c=(c&3)<<4|d>>4,k=(d&15)<<2|e>>6,f=e&63,isNaN(d)?k=f=64:isNaN(e)&&(f=64),b=b+this._keyStr.charAt(h)+this._keyStr.charAt(c)+this._keyStr.charAt(k)+this._keyStr.charAt(f);return b},decode:function(a){var b="",c,d,e,h,k,f=0;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");f<a.length;)c=this._keyStr.indexOf(a.charAt(f++)),d=this._keyStr.indexOf(a.charAt(f++)),h=this._keyStr.indexOf(a.charAt(f++)),k=this._keyStr.indexOf(a.charAt(f++)),c=c<<2|d>>4,d=(d&15)<<4|h>>2,e=(h&3)<<6|k,b+=String.fromCharCode(c),
64!=h&&(b+=String.fromCharCode(d)),64!=k&&(b+=String.fromCharCode(e));return b=l._utf8_decode(b)},_utf8_encode:function(a){a=a.replace(/\r\n/g,"\n");for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b+=String.fromCharCode(d):(127<d&&2048>d?b+=String.fromCharCode(d>>6|192):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128)),b+=String.fromCharCode(d&63|128))}return b},_utf8_decode:function(a){for(var b="",c=0,d=c1=c2=0;c<a.length;)d=a.charCodeAt(c),128>d?(b+=String.fromCharCode(d),
c++):191<d&&224>d?(c2=a.charCodeAt(c+1),b+=String.fromCharCode((d&31)<<6|c2&63),c+=2):(c2=a.charCodeAt(c+1),c3=a.charCodeAt(c+2),b+=String.fromCharCode((d&15)<<12|(c2&63)<<6|c3&63),c+=3);return b}};var l=com.vizengine.core.Base64;com.vizengine.core.RequestUtil={getRequestParam:function(a){var b={params:{},frameworkParams:{},setParam:function(a,b){this[a]=b;"@"==a[0]?this.frameworkParams[a.substring(1)]=b:this.params[a]=b},toString:function(){var a="",b=!0,c;for(c in this.params)b?b=!1:a+="&",a+=c,
a+="=",a+=encodeURIComponent(this.params[c]);for(c in this.frameworkParams.length)b?b=!1:a+="&",a+="@"+c,a+="=",a+=encodeURIComponent(this.frameworkParams[c]);return a}};if(null==a)return b;var c=a.indexOf("?");if(0<=c)a=a.substring(c+1);else return b;a=a.split("&");for(c=0;c<a.length;c++){var d=a[c].split("=")[0],e=decodeURIComponent(a[c].split("=")[1]);b[d]=e;"@"==d[0]?b.frameworkParams[d.substring(1)]=e:b.params[d]=e}return b}};window.trace=function(a){var b=arguments.callee.caller,c=0;a=a||10;
for(log("vizenginePROFILE ***----------------------------------------  ** "+(c+1));b&&c<a;)b.toString().replace(/\n/g,"\nvizenginePROFILE "),log(b.toString()),b=b.caller,c++,log("vizenginePROFILE ***---------------------------------------- ** "+(c+1))};window.argumentsToArray=function(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c]);return b};null==window.setInterval&&(window.setInterval=function(a,b){var c={running:!0},d=function(){setTimeout(function(){c.running&&(a(),d())},b)};d();return c},window.clearInterval=
function(a){a.running=!1})});
